angular.module("app").controller("NavController",["$scope","$rootScope","$window","$http","$interval","$timeout","commonFunctionsService",function(e,n,c,i,a,o,s){e.isOutstandingInNavAlreadyClicked=s.isOutstandingInNavAlreadyClicked,e.hideOutstandingDotInNav=s.hideOutstandingDotInNav,e.coin_prices={},e.usd_prices={},loadcoinprices_etag=null,loadCoinPrices=function(){i.get(c.PRICES_ENDPOINT+"/prices/general_coin_prices",{headers:{"If-None-Match":loadcoinprices_etag}}).then((function(e){loadcoinprices_etag=e.headers("Etag"),updateCoinPrices(e.data)}),(function(e){}))},loadusprices_etag=null,loadUsdPrices=function(){i.get(c.PRICES_ENDPOINT+"/prices/general_usd_prices",{headers:{"If-None-Match":loadusprices_etag}}).then((function(e){loadusprices_etag=e.headers("Etag"),updateUsdPrices(e.data)}),(function(e){}))},updateCoinPrices=function(c){e.coin_prices=c,n.coin_prices=c},updateUsdPrices=function(n){e.usd_prices=n},loadCoinPrices(),loadUsdPrices();var d,t,r,l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4),p=!0;document.addEventListener("visibilitychange",(function(){p=!0,a.cancel(l),a.cancel(u),o.cancel(d),o.cancel(t),document.hidden?p=!1:(d=o(loadCoinPrices,500),t=o(loadUsdPrices,500),l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4))})),window.addEventListener("focus",(function(){o.cancel(r),r=o((function(){p||(a.cancel(l),a.cancel(u),o.cancel(d),o.cancel(t),d=o(loadCoinPrices,1),t=o(loadUsdPrices,1),l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4),p=!0)}),499)}))}]);