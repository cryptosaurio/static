angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","ngclipboard","angular.snackbar","star-rating","fayzaan.gRecaptcha.v3"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider","$locationProvider","$mdAriaProvider",function(e,i,n,t,r){i.debugInfoEnabled(!1),n.disableTheming(!0),r.disableWarnings(),e.decorator("$exceptionHandler",["$delegate",function(n){return function(e,i){n(e,i),reportError(JSON.stringify({exception:"object"==typeof e?e.stack:""+e,cause:""+i}))}}]),t.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/*"])}]);var e=angular.module("app");e.controller("ReviewsRankingController",["$scope","$window","$location","$http","$timeout","$mdDialog","gRecaptcha","commonFunctionsService",function(n,t,e,i,r,a,o,s){n.tooltipCopySuccessful=s.tooltipCopySuccessful,n.track=s.track,n.showCountriesMenu=s.showCountriesMenu,n.orderByOption={option:"br"==t.COUNTRY?"melhor-medio":"mejor-promedio"},o.initialize({key:"6Le6vr8ZAAAAAH6G2kvLs-VDT1cKIa_UGepnpMBI"});function l(e){c=e}var c=!(n.showDialogButtonDisabled=[]);n.showReviewSubmitDialog=function(e,i){n.showDialogButtonDisabled[e]||(n.showDialogButtonDisabled[e]=!0,a.show({controller:"ReviewSubmitDialogController",templateUrl:"/"+t.COUNTRY+"/partials/review-submit-dialog",parent:angular.element(document.body),targetEvent:i,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,locals:{extraParameters:{providerSelected:e,context:"ranking-page"},changeSubmittedState:l,gRecaptchaV3:o},onComplete:function(){n.showDialogButtonDisabled[e]=!1},onRemoving:function(e,i){c&&n.fetchRankingWhenChangeOrderByOption(n.orderByOption.option)}}))},n.fetchRankingWhenChangeOrderByOption=function(e){n.orderByOption.option=e,n.fetchRanking()},n.fetchRanking=function(){i.get(t.BARNEY_ENDPOINT+"/reviews/summarized-reviews-info/"+n.orderByOption.option).then(function(e){n.ranking=e.data},function(){})},r(function(){n.fetchRanking()},0),n.getRanking=function(){return n.ranking}}]),(e=angular.module("app")).controller("ReviewSubmitDialogController",["$scope","$window","$timeout","$http","$mdDialog","extraParameters","changeSubmittedState","gRecaptchaV3",function(n,i,t,r,e,a,o,s){n.step1=!0,n.step2=!1,n.context=a.context,n.providerSelected=a.providerSelected,n.answers={provider_id:a.providerSelected,review_comment:"",transfer_speed_rating:0,liquidity_rating:0,usability_rating:0,support_rating:0},n.submitReview=function(){var e=!1;n.answers.transfer_speed_rating<1&&n.answers.liquidity_rating<1&&(e||(angular.element(-1==n.answers.provider_id.indexOf("p2p")?document.querySelector("#transfer-speed-rating-div"):document.querySelector("#liquidity-rating-div"))[0].scrollIntoView(),e=!0),n.transfer_speed_rating_is_invalid=!0),n.answers.usability_rating<1&&(e||(angular.element(document.querySelector("#usability-rating-div"))[0].scrollIntoView(),e=!0),n.usability_rating_is_invalid=!0),n.answers.support_rating<1&&(e||(angular.element(document.querySelector("#support-rating-div"))[0].scrollIntoView(),e=!0),n.support_rating_is_invalid=!0),(n.answers.review_comment.length<20||1500<n.answers.review_comment.length)&&(e||(angular.element(document.querySelector("#review-comment-area-div"))[0].scrollIntoView(),e=!0),n.review_comment_area_is_invalid=!0,n.review_comment_area_was_invalid=!0),n.review_comment_area_is_invalid||n.transfer_speed_rating_is_invalid||n.usability_rating_is_invalid||n.support_rating_is_invalid?t(function(){n.review_comment_area_is_invalid=!1,n.transfer_speed_rating_is_invalid=!1,n.usability_rating_is_invalid=!1,n.support_rating_is_invalid=!1},1e3):n.submitting||(n.submitting=!0,s.execute({action:"submit_review"}).then(function(e){n.answers.captcha_response=e;e=i.BARNEY_ENDPOINT+"/"+i.COUNTRY+"/reviews/";"br"!=i.COUNTRY&&(e=i.BARNEY_ENDPOINT+"/reviews/"),r.put(e,n.answers),n.step1=!1,o(!0),n.step2=!0,n.submitting=!1}))},n.onRatingChange=function(e,i){n.answers[e]=i},n.getSelectedProvider=function(e){return angular.element(document.querySelectorAll('[value="'+e+'"]')).text().trim()},n.getSeeProviderReviewsUrl=function(e){return"/"+i.COUNTRY+"/opiniones/"+e+"/"},n.cancelModal=function(){e.cancel()}}]);