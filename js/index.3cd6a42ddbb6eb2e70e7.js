(()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","ngclipboard","angular.snackbar","tooltips","angular-carousel"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider","$mdAriaProvider",function(t,r,o,a,i){r.debugInfoEnabled(!1),o.disableTheming(!0),i.disableWarnings(),t.decorator("$locale",["$delegate",function(e){return e.NUMBER_FORMATS.DECIMAL_SEP=",",e.NUMBER_FORMATS.GROUP_SEP=".",e}]),t.decorator("$exceptionHandler",["$delegate",function(t){return function(r,o){t(r,o),window.reportError(JSON.stringify({exception:"object"==e(r)?r.stack:""+r,cause:""+o}))}}]),a.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/**","**/static/**"])}])})(),angular.module("app").service("providersService",(function(){var e=new Set;this.get=function(){return Array.from(e).sort()},this.add=function(t){e.add(t)},this.delete=function(t){e.delete(t)},this.clear=function(){e.clear()}})),(()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}angular.module("app").controller("MainController",["$scope","$rootScope","$window","$http","$interval","$timeout","$mdDialog","$animate","$mdPanel","providersService","commonFunctionsService",function(t,r,o,a,i,n,l,c,s,d,u){var f=this;t.tooltipCopySuccessful=u.tooltipCopySuccessful,t.track=u.track,t.trackSystem=u.trackSystem,t.showCountriesMenu=u.showCountriesMenu,t.isCoinPricesAvailable=function(){return!!r.coin_prices&&r.coin_prices.data&&r.coin_prices.data.bitcoin&&r.coin_prices.data.bitcoin.usd},t.hideNews=function(){try{return!!JSON.parse(o.localStorage.getItem("staking_news_closed"))||!1}catch(e){return!1}},t.closeNews=function(){try{o.localStorage.setItem("staking_news_closed",!0)}catch(e){}};var p={ar:["ARS","USD"],mx:["MXN","USD"],cl:["CLP","USD"],br:["BRL","USD"],co:["COP","USD"],ve:["VES"],pe:["PEN","USD"]},g={ar:{ARS:new Set,USD:new Set},mx:{MXN:new Set,USD:new Set},cl:{CLP:new Set,USD:new Set},br:{BRL:new Set,USD:new Set},co:{COP:new Set,USD:new Set},ve:{VES:new Set},pe:{PEN:new Set,USD:new Set}},m={ar:{ARS:new Set,USD:new Set},mx:{MXN:new Set,USD:new Set},cl:{CLP:new Set,USD:new Set},br:{BRL:new Set,USD:new Set},co:{COP:new Set,USD:new Set},ve:{VES:new Set},pe:{PEN:new Set,USD:new Set}},S={ar:new Set,mx:new Set,cl:new Set,br:new Set,co:new Set,ve:new Set,pe:new Set};t.blockedCryptosInFilters=S;var y={ar:new Set,mx:new Set,cl:new Set,br:new Set,co:new Set,ve:new Set,pe:new Set};t.minimumRollInversionPerCountry={ar:1e3,mx:150,cl:10500,br:50,co:4e4,ve:32e3,pe:40},t.maxDecimalsPerCoin={BTC:7,ETH:7,DAI:2,USDC:2,USDT:2,UST:2,BNB:7,ADA:7,LTC:7,CAKE:3,UNI:3,MATIC:7,SOL:7,DOT:7,LINK:7,XRP:7,BCH:7,DOGE:7},f.maxDecimalsPerCoin=t.maxDecimalsPerCoin,c.enabled(angular.element(document.getElementById("roll-calculator-dialog")),!1),t.redirectToNewWindow=function(e,t){e.preventDefault(),o.open(t)},t.redirectTo=function(e){o.location.href=e},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.carouselDataByCoin={btc:{index:0},eth:{index:0},dai:{index:0},usdc:{index:0},usdt:{index:0},ust:{index:0},bnb:{index:0},ada:{index:0},ltc:{index:0},cake:{index:0},matic:{index:0},sol:{index:0},uni:{index:0},dot:{index:0},bch:{index:0},doge:{index:0},xrp:{index:0},link:{index:0}},t.getObjectKeys=function(e){return Object.keys(e)},t.prevCarouselPage=function(e){e.index-=1},t.nextCarouselPage=function(e){e.index+=1};var C=p[o.COUNTRY];try{C.indexOf(o.localStorage.getItem("currency_selected"))>-1&&(o.localStorage.setItem(o.COUNTRY+"_currency_selected",o.localStorage.getItem("currency_selected")),o.localStorage.removeItem("currency_selected"))}catch(e){}try{t.currencySelected=C.indexOf(o.localStorage.getItem(o.COUNTRY+"_currency_selected"))>-1?o.localStorage.getItem(o.COUNTRY+"_currency_selected"):o.localStorage.removeItem(o.COUNTRY+"_currency_selected")||C[0]}catch(e){t.currencySelected=C[0]}f.currencySelected=t.currencySelected;var b=[k];t.visibleFiltersDialog=!1;var v={},h={},O=!1,_=new Set,N=new Map,R={open:!1,coin:null};t.IS_MOBILE=window.IS_MOBILE;try{JSON.parse(o.localStorage.getItem("custom_alerts_config"))&&(o.localStorage.setItem(o.COUNTRY+"_custom_alerts_config",JSON.stringify(JSON.parse(o.localStorage.getItem("custom_alerts_config")))),o.localStorage.removeItem("custom_alerts_config"))}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_custom_alerts_config",JSON.stringify({})),o.localStorage.removeItem("custom_alerts_config")}catch(e){}}try{JSON.parse(o.localStorage.getItem("custom_alerts_enabled"))&&(o.localStorage.setItem(o.COUNTRY+"_custom_alerts_enabled",JSON.stringify(JSON.parse(o.localStorage.getItem("custom_alerts_enabled")))),o.localStorage.removeItem("custom_alerts_enabled"))}catch(e){}try{t.customAlertsConfig=JSON.parse(o.localStorage.getItem(o.COUNTRY+"_custom_alerts_config"))||{}}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_custom_alerts_config",JSON.stringify({}))}catch(e){}t.customAlertsConfig={}}try{t.customAlertsEnabled=!!JSON.parse(o.localStorage.getItem(o.COUNTRY+"_custom_alerts_enabled"))&&!angular.equals(t.customAlertsConfig,{})||!1}catch(e){t.customAlertsEnabled=!1}f.customAlertsEnabled=t.customAlertsEnabled;try{o.localStorage.setItem(o.COUNTRY+"_custom_alerts_enabled",t.customAlertsEnabled)}catch(e){}t.getCustomAlertText=function(){if(t.getAlertsEnabled()){var e=[];for(var r in t.customAlertsConfig.coins)t.customAlertsConfig.coins[r].selected&&e.push(t.customAlertsConfig.coins[r].code);var a="";e.length>1?(a=e.slice(0,-1).join(", "),a+=" "+o.i18n.and+" "+e.slice(-1)[0]):a=e[0];var i=o.i18n["modulo-arbitrajes.alertas.alertas-configuradas.generic"];return t.customAlertsEnabled&&(i=o.i18n["modulo-arbitrajes.alertas.alertas-configuradas.dynamic"].replace("$COINS",a).replace("$PROFIT",t.customAlertsConfig.profit.replace(".",","))),i}return""};try{JSON.parse(o.localStorage.getItem("generic_alerts_enabled"))&&(o.localStorage.setItem(o.COUNTRY+"_generic_alerts_enabled",JSON.parse(o.localStorage.getItem("generic_alerts_enabled"))),o.localStorage.removeItem("generic_alerts_enabled"))}catch(e){}try{t.alertsEnabled=!!JSON.parse(o.localStorage.getItem(o.COUNTRY+"_generic_alerts_enabled"))||t.customAlertsEnabled||!1}catch(e){t.alertsEnabled=!1}for(var I in t.getAlertsEnabled=function(){return t.alertsEnabled},t.alertsPermissionGrantedInThePast="Notification"in window&&"granted"===Notification.permission,t.rollsLoadingStatus="indeterminate",p[o.COUNTRY])try{JSON.parse(o.localStorage.getItem("blocked_providers_"+p[o.COUNTRY][I].toLowerCase()))&&(o.localStorage.setItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][I],JSON.stringify(JSON.parse(o.localStorage.getItem("blocked_providers_"+p[o.COUNTRY][I].toLowerCase())))),o.localStorage.removeItem("blocked_providers_"+p[o.COUNTRY][I].toLowerCase())),g[o.COUNTRY][p[o.COUNTRY][I]]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][I])))}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][I],JSON.stringify([]))}catch(e){}}try{S[o.COUNTRY]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_cryptos"))),S[o.COUNTRY]=new Set(Array.from(S[o.COUNTRY]).filter((function(e){return-1==["BTC","ETH"].indexOf(e)})))}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_blocked_cryptos",JSON.stringify([]))}catch(e){}}try{y[o.COUNTRY]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_cryptos"))),y[o.COUNTRY]=new Set(Array.from(y[o.COUNTRY]).filter((function(e){return-1==["BTC","ETH"].indexOf(e)})))}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_blocked_cryptos",JSON.stringify([]))}catch(e){}}for(var I in t.appliedFiltersText=function(){var e="";return(g[o.COUNTRY][t.currencySelected].size>0||S[o.COUNTRY].size>0)&&(e="("+(e=(g[o.COUNTRY][t.currencySelected].size||"")+(S[o.COUNTRY].size||""))+")"),e},p[o.COUNTRY])try{m[o.COUNTRY][p[o.COUNTRY][I]]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][I])))}catch(e){try{o.localStorage.setItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][I],JSON.stringify([]))}catch(e){}}function A(e){return!m[o.COUNTRY][t.currencySelected].has(e)}function w(e){return!y[o.COUNTRY].has(e)}function T(){return Array.from(g[o.COUNTRY][t.currencySelected]).sort()}function U(r,i){return S[o.COUNTRY].has(r.toUpperCase())?(t.coinsData[r]={},!1):(t.coinsData[r]=t.coinsData[r]||{},t.coinsData[r][i]=t.coinsData[r][i]||{},t.coinsData[r][i].loadingStatus="indeterminate",a.get(o.PRICES_ENDPOINT+"/prices/"+t.currencySelected+"/"+r+"/"+i+(T().length>0?"?not="+T().join():""),{headers:{"If-None-Match":h[r+i+t.currencySelected+T().join("")]}}).then((function(e){var a=[];for(var n in h[r+i+t.currencySelected+T().join("")]=e.headers("Etag"),e.data)e.data[n].fields[t.currencySelected]?(e.data[n].fields.price=e.data[n].fields[t.currencySelected],e.data[n].fields.price.currencyMask=["ARS","MXN","CLP","COP"].indexOf(t.currencySelected)>-1?"$":"BRL"==t.currencySelected?"R$":"VES"==t.currencySelected?"Bs.":"PEN"==t.currencySelected?"S/":"US$"):e.data[n].fields.prices&&e.data[n].fields.prices[t.currencySelected]&&e.data[n].fields.prices[t.currencySelected][i]&&e.data[n].fields.prices[t.currencySelected][i].length>0&&(e.data[n].fields.price=e.data[n].fields.prices[t.currencySelected][i][0],e.data[n].fields.price.currencyMask=["ARS","MXN","CLP","COP"].indexOf(t.currencySelected)>-1?"$":"BRL"==t.currencySelected?"R$":"VES"==t.currencySelected?"Bs.":"PEN"==t.currencySelected?"S/":"US$",e.data[n].fields.currencyMask=["ARS","MXN","CLP","COP"].indexOf(t.currencySelected)>-1?"$":"BRL"==t.currencySelected?"R$":"VES"==t.currencySelected?"Bs.":"PEN"==t.currencySelected?"S/":"US$"),(e.data[n].fields[t.currencySelected]||e.data[n].fields.prices&&e.data[n].fields.prices[t.currencySelected]&&e.data[n].fields.prices[t.currencySelected][i])&&(a.push(e.data[n]),d.add(e.data[n].fields.name),g[o.COUNTRY][t.currencySelected].forEach(d.add,d));t.coinsData[r][i]=a,R.open&&t.showP2PModal(R.provider,R.coin,R.operationType,null,!0)}),(function(e){304!==e.status?t.coinsData[r][i].error=!0:t.coinsData[r][i].error=!1})).finally((function(){for(var a in t.coinsData[r][i])"ar"==o.COUNTRY&&"object"==e(t.coinsData[r][i][a])&&"satoshitango"==t.coinsData[r][i][a].fields.id&&(t.coinsData[r][i][a].fields.infoAccess=!0,t.coinsData[r][i][a].fields.infoUrl="https://www.satoshitango.com/blog/como-comprar-bitcoins-con-satoshitango/");if(["btc","eth","bnb","ltc","uni","ada","matic"].indexOf(r)>-1){var n=!1;for(var a in t.coinsData[r][i])if("object"==e(t.coinsData[r][i][a])&&"bybit"==t.coinsData[r][i][a].fields.id){n=!0;break}!n&&"push"in t.coinsData[r][i]&&t.coinsData[r][i].push({fields:{id:"bybit",name:"ask"==i?"Bybit":"",url:"br"!=o.COUNTRY?"https://www.bybit.com/es-ES/invite?ref=PW7M2%230":"https://www.bybit.com/pt-BR/invite?ref=PW7M2%230",infoUrl:"br"!=o.COUNTRY?"https://go.bybit.com/e/BTx6M9uu5hb":"https://go.bybit.com/e/uM1yN8Mh7hb",infoAccess:"ask"==i}})}if("ar"===o.COUNTRY&&["btc","eth","bnb","ltc","uni","ada","matic"].indexOf(r)>-1){for(var a in n=!1,t.coinsData[r][i])if("object"==e(t.coinsData[r][i][a])&&"coinex"==t.coinsData[r][i][a].fields.id){n=!0;break}!n&&"push"in t.coinsData[r][i]&&t.coinsData[r][i].push({fields:{id:"coinex",name:"ask"==i?"CoinEx":"",url:"https://www.coinex.com/register?refer_code=82yur",infoUrl:"https://spanish-marketing.medium.com/",infoAccess:"ask"==i}})}if("br"!==o.country&&["btc","eth","usdt"].indexOf(r)>-1){for(var a in n=!1,t.coinsData[r][i])if("object"==e(t.coinsData[r][i][a])&&"huobip2p"==t.coinsData[r][i][a].fields.id){t.coinsData[r][i][a].fields.infoAccess=!0,t.coinsData[r][i][a].fields.infoUrl="https://www.youtube.com/watch?v=wqf0fsRIX_A&list=PL5-p5W5hHZ5jwE9kTULY88z6xGxGmGav1",n=!0;break}!n&&"push"in t.coinsData[r][i]&&t.coinsData[r][i].push({fields:{id:"huobip2p",name:"ask"==i?"Huobi P2P":"",url:"https://www.huobi.com/register/?invite_code=yrbt5",infoUrl:"https://www.youtube.com/watch?v=wqf0fsRIX_A&list=PL5-p5W5hHZ5jwE9kTULY88z6xGxGmGav1",infoAccess:!0}})}if(["btc"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["fiwind","buenbit","tiendacrypto"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0),"object"==e(t.coinsData[r][i][a])&&["paxfulp2p","belo"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.lightningNetwork=!0);if(["eth"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["fiwind","buenbit","tiendacrypto"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0);if(["bnb"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["tiendacrypto"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0);if(["dai"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["tiendadolar","buenbit","tiendacrypto","fiwind"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0);if(["ust"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["tiendacrypto"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0);if(["usdc"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["vibrant"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.stellar=!0);if(["usdt"].indexOf(r)>-1)for(var a in t.coinsData[r][i])"object"==e(t.coinsData[r][i][a])&&["belo","fiwind","decrypto"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.tron=!0),"object"==e(t.coinsData[r][i][a])&&["fiwind"].indexOf(t.coinsData[r][i][a].fields.id)>-1&&(t.coinsData[r][i][a].fields.bsc=!0);t.coinsData[r][i].loadingStatus="determinate"})))}t.notExistsInBlockedProvidersList=A,f.notExistsInBlockedProvidersList=A,t.addOrRemoveFromBlockedProviderList=function(e){t.notExistsInBlockedProvidersList(e)?m[o.COUNTRY][t.currencySelected].add(e):m[o.COUNTRY][t.currencySelected].delete(e)},f.addOrRemoveFromBlockedProviderList=t.addOrRemoveFromBlockedProviderList,t.getProviders=function(){return t.visibleFiltersDialog?Array.from(new Set(d.get().concat(Array.from(g[o.COUNTRY][t.currencySelected])))).sort():[]},t.getProvidersWithoutP2P=function(){return t.visibleFiltersDialog?Array.from(new Set(d.get().concat(Array.from(g[o.COUNTRY][t.currencySelected])))).filter((function(e){return-1==e.indexOf("P2P")})).sort():[]},f.getProvidersWithoutP2P=t.getProvidersWithoutP2P,t.getP2PProviders=function(){return t.visibleFiltersDialog?Array.from(new Set(d.get().concat(Array.from(g[o.COUNTRY][t.currencySelected])))).filter((function(e){return e.indexOf("P2P")>-1})).sort():[]},f.getP2PProviders=t.getP2PProviders,t.notExistsInBlockedCryptosList=w,f.notExistsInBlockedCryptosList=w,t.addOrRemoveFromBlockedCryptosList=function(e){t.notExistsInBlockedCryptosList(e)?y[o.COUNTRY].add(e):y[o.COUNTRY].delete(e)},f.addOrRemoveFromBlockedCryptosList=t.addOrRemoveFromBlockedCryptosList,t.isCryptosInFiltersIndeterminated=function(){var e=Array.from(y[o.COUNTRY]).filter((function(e){return-1==["BTC","ETH"].indexOf(e)})).length;return e>0&&e!=o.AVAILABLE_COINS.length-2&&!t.allCryptosCheckedInFiltersDialog()},f.isCryptosInFiltersIndeterminated=t.isCryptosInFiltersIndeterminated,t.allCryptosCheckedInFiltersDialog=function(){return 0==Array.from(y[o.COUNTRY]).filter((function(e){return-1==["BTC","ETH"].indexOf(e)})).length},f.allCryptosCheckedInFiltersDialog=t.allCryptosCheckedInFiltersDialog,t.toggleAllCryptosInFilters=function(){if(t.allCryptosCheckedInFiltersDialog()||t.isCryptosInFiltersIndeterminated())for(I in o.AVAILABLE_COINS)-1==["BTC","ETH"].indexOf(o.AVAILABLE_COINS[I].toUpperCase())&&y[o.COUNTRY].add(o.AVAILABLE_COINS[I].toUpperCase());else y[o.COUNTRY].clear()},f.toggleAllCryptosInFilters=t.toggleAllCryptosInFilters,t.allProvidersIncludingP2PAndCryptosBlockedInFiltersDialog=function(){return Array.from(y[o.COUNTRY]).length==o.AVAILABLE_COINS.length||Array.from(m[o.COUNTRY][t.currencySelected]).length==t.getProviders().length},f.allProvidersIncludingP2PAndCryptosBlockedInFiltersDialog=t.allProvidersIncludingP2PAndCryptosBlockedInFiltersDialog,t.allProviderCheckedInFiltersDialog=function(){return 0==Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return-1==e.indexOf("P2P")})).length},f.allProviderCheckedInFiltersDialog=t.allProviderCheckedInFiltersDialog,t.allProviderP2PCheckedInFiltersDialog=function(){return 0==Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return e.indexOf("P2P")>-1})).length},f.allProviderP2PCheckedInFiltersDialog=t.allProviderP2PCheckedInFiltersDialog,t.isProvidersInFiltersIndeterminated=function(){var e=Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return-1==e.indexOf("P2P")})).length;return e>0&&e!=t.getProvidersWithoutP2P().length&&!t.allProviderCheckedInFiltersDialog()},f.isProvidersInFiltersIndeterminated=t.isProvidersInFiltersIndeterminated,t.isProvidersP2PInFiltersIndeterminated=function(){var e=Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return e.indexOf("P2P")>-1})).length;return e>0&&e!=t.getP2PProviders().length&&!t.allProviderP2PCheckedInFiltersDialog()},f.isProvidersP2PInFiltersIndeterminated=t.isProvidersP2PInFiltersIndeterminated,t.toggleAllProvidersInFilters=function(){if(t.allProviderCheckedInFiltersDialog()||t.isProvidersInFiltersIndeterminated())for(I in t.getProvidersWithoutP2P())m[o.COUNTRY][t.currencySelected].add(t.getProvidersWithoutP2P()[I]);else m[o.COUNTRY][t.currencySelected]=new Set(Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return e.indexOf("P2P")>-1})))},f.toggleAllProvidersInFilters=t.toggleAllProvidersInFilters,t.toggleAllProvidersP2PInFilters=function(){if(t.allProviderP2PCheckedInFiltersDialog()||t.isProvidersP2PInFiltersIndeterminated())for(I in t.getP2PProviders())m[o.COUNTRY][t.currencySelected].add(t.getP2PProviders()[I]);else m[o.COUNTRY][t.currencySelected]=new Set(Array.from(m[o.COUNTRY][t.currencySelected]).filter((function(e){return-1==e.indexOf("P2P")})))},f.toggleAllProvidersP2PInFilters=t.toggleAllProvidersP2PInFilters,t.doFilter=function(){if(g[o.COUNTRY][t.currencySelected].size!=m[o.COUNTRY][t.currencySelected].size||JSON.stringify(Array.from(g[o.COUNTRY][t.currencySelected]).sort())!==JSON.stringify(Array.from(m[o.COUNTRY][t.currencySelected]).sort())||S[o.COUNTRY].size!=y[o.COUNTRY].size||JSON.stringify(Array.from(S[o.COUNTRY]).sort())!==JSON.stringify(Array.from(y[o.COUNTRY]).sort())){for(var e in g[o.COUNTRY][t.currencySelected]=new Set(m[o.COUNTRY][t.currencySelected]),S[o.COUNTRY]=new Set(y[o.COUNTRY]),p[o.COUNTRY])try{o.localStorage.setItem(o.COUNTRY+"_blocked_providers_"+p[o.COUNTRY][e],JSON.stringify(Array.from(g[o.COUNTRY][p[o.COUNTRY][e]])))}catch(e){}try{o.localStorage.setItem(o.COUNTRY+"_blocked_cryptos",JSON.stringify(Array.from(S[o.COUNTRY])))}catch(e){}t.updatePrices(void 0,!0)}l.hide()},f.doFilter=t.doFilter,t.changePriceDisabled=!1,t.whenChangeCurrency=function(e){b.push(e)},t.updatePrices=function(e,r){if(_.clear(),N.clear(),r)o.dataLayer.push({event:"user_action",event_category:"providers_filtered",event_label:T().join()+"|"+Array.from(S[o.COUNTRY]).join()||"Unfiltered"});else{e&&(t.currencySelected=e),o.dataLayer.push({event:"user_action",event_category:"currency_change",event_label:t.currencySelected}),t.changePriceDisabled=!0;try{g[o.COUNTRY][t.currencySelected]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_providers_"+t.currencySelected))),m[o.COUNTRY][t.currencySelected]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_providers_"+t.currencySelected))),S[o.COUNTRY]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_cryptos"))),y[o.COUNTRY]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_cryptos")))}catch(e){}d.clear()}for(var a in v={},h={},b)b[a]();r?(O=!0,n((function(){O=!1}),1e3)):n((function(){t.changePriceDisabled=!1}),2500);try{o.localStorage.setItem(o.COUNTRY+"_currency_selected",t.currencySelected)}catch(e){}f.currencySelected=t.currencySelected},t.btc_title="<i class='crypto-icon btc'></i> <h2>BITCOIN</h2>",t.eth_title="<i class='crypto-icon eth'></i> <h2>ETHEREUM</h2>",t.dai_title="<i class='crypto-icon dai'></i> <h2>DAI</h2>",t.usdc_title="<i class='crypto-icon usdc'></i> <h2>USDC</h2>",t.usdt_title="<i class='crypto-icon usdt'></i> <h2>USDT</h2>",t.ust_title="<i class='crypto-icon ust'><img src='/static/img/coin-ust.svg'></i> <h2>UST</h2>",t.bnb_title="<i class='crypto-icon bnb'></i> <h2>BNB</h2>",t.uni_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/uniswap-uni-logo.svg?v=010'></i> <h2>UNI</h2>",t.ada_title="<i class='crypto-icon ada'></i> <h2>ADA</h2>",t.ltc_title="<i class='crypto-icon ltc'></i> <h2>LTC</h2>",t.cake_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/pancakeswap-cake-logo.svg?v=010'></i> <h2>CAKE</h2>",t.matic_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/polygon-matic-logo.svg'></i> <h2>MATIC</h2>",t.sol_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/solana-sol-logo.svg'></i> <h2>SOL</h2>",t.bch_title="<i class='crypto-icon own-generic'></i> <h2>BCH</h2>",t.doge_title="<i class='crypto-icon own-generic'></i> <h2>DOGE</h2>",t.xrp_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/xrp-xrp-logo.svg'></i> <h2>XRP</h2>",t.link_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/chainlink-link-logo.svg'></i> <h2>LINK</h2>",t.dot_title="<i class='crypto-icon own-generic'><img src='https://cryptologos.cc/logos/polkadot-new-dot-logo.svg'></i> <h2>DOT</h2>",t.coinsData={},t.showP2PModal=function(r,a,i,n,c){for(var s={name:"",ask:{},bid:{}},d=0;d<t.coinsData[a][i].length;d++)if("object"==e(t.coinsData[a][i][d])&&t.coinsData[a][i][d].fields.id==r){s.name=t.coinsData[a][i][d].fields.name,s[i]=t.coinsData[a][i][d],f.p2pLimitAvailable=t.coinsData[a][i][d].fields.prices[t.currencySelected]&&t.coinsData[a][i][d].fields.prices[t.currencySelected][i]&&t.coinsData[a][i][d].fields.prices[t.currencySelected][i].length>0&&null!=t.coinsData[a][i][d].fields.prices[t.currencySelected][i][0].limit;break}f.p2pOperationType=i,f.p2pModalData=s,f.p2pModalData[i]&&f.p2pModalData[i].fields.prices[t.currencySelected][i]&&0!=f.p2pModalData[i].fields.prices[t.currencySelected][i].length||l.cancel(),c||(f.p2pCoinSelected=a.toUpperCase(),f.p2pModalTitle=t[a+"_title"],t.p2pModalProviderId=r,R.open=!0,R.coin=a,R.operationType=i,R.provider=r,o.dataLayer.push({event:"user_action",event_category:"p2p_modal_"+r+"_open",event_label:r+"_"+a+"_"+i}),l.show({templateUrl:"/"+o.COUNTRY+"/partials/p2p-dialog",controller:function(){return f},controllerAs:"ctrl",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,onRemoving:function(){R.open=!1}}))},t.showFeesModal=function(e,a){l.show({templateUrl:"/"+o.COUNTRY+"/partials/gas-dialog/"+e+"/"+("btc"==e?r.coin_prices.data.bitcoin.usd:r.coin_prices.data.ethereum.usd),parent:angular.element(document.body),targetEvent:a,controller:function(){this.cancelModal=t.cancelModal},controllerAs:"ctrl",bindToController:!0,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0})},t.specificRollData={};var D={body:o.i18n["modulo-arbitrajes.alertas.alerta.new.text"],icon:"/static/img/logo-web.png?v1"},P=new Set;for(var I in o.AVAILABLE_COINS)P.add(o.AVAILABLE_COINS[I].toUpperCase());var E=["BTC","ETH","DAI","USDC","USDT"];function k(){t.rollsLoadingStatus="indeterminate",a.get(o.PRICES_ENDPOINT+"/rolls/"+t.currencySelected+(T().length>0?"?not="+T().join():""),{headers:{"If-None-Match":v[t.currencySelected+T().join("")]}}).then((function(e){var r=[];v[t.currencySelected+T().join("")]=e.headers("Etag");var a="";for(var i in E)L(!1,E[i].toLowerCase());var l="",c=[];for(var i in e.data){if(a!=e.data[i].k&&(a=e.data[i].k),e.data[i].buy.fields[t.currencySelected]&&e.data[i].sell.fields[t.currencySelected]){e.data[i].buy.fields.price=e.data[i].buy.fields[t.currencySelected],e.data[i].sell.fields.price=e.data[i].sell.fields[t.currencySelected],e.data[i].buy.fields.currencyMask=["ARS","MXN","CLP","COP"].indexOf(t.currencySelected)>-1?"$":"BRL"==t.currencySelected?"R$":"VES"==t.currencySelected?"Bs.":"PEN"==t.currencySelected?"S/":"US$",e.data[i].sell.fields.currencyMask=["ARS","MXN","CLP","COP"].indexOf(t.currencySelected)>-1?"$":"BRL"==t.currencySelected?"R$":"VES"==t.currencySelected?"Bs.":"PEN"==t.currencySelected?"S/":"US$";for(var s=!1,d=0;d<r.length&&!s;d++)r[d].k==a&&(s=!0);c[a]=c[a]||[],c[a].push(e.data[i]),s||r.push(e.data[i]),""!=l&&l!=a&&L(!0,l,c[l]),e.data.length-1==i&&L(!0,a,c[a])}else""!=l&&l!=a&&L(!1,l);l=a}if(t.rollsLoadingStatus="determinate",!window.IS_MOBILE){var u=new Set,f=new Set,p=new Set;for(var i in P.forEach(p.add,p),r)if(p.delete(r[i].k.toUpperCase()),!t.customAlertsEnabled||t.customAlertsEnabled&&t.customAlertsConfig.coins.filter((function(e){return e.code==r[i].k.toUpperCase()&&e.selected})).length>0&&parseFloat(r[i].difference.replace(",","."))>=t.customAlertsConfig.profit){if(_.has(r[i].k.toUpperCase())&&N.has(r[i].k.toUpperCase()+"|"+r[i].buy.fields.name.toUpperCase()+"|"+r[i].sell.fields.name.toUpperCase()))N.has(r[i].k.toUpperCase()+"|"+r[i].buy.fields.name.toUpperCase()+"|"+r[i].sell.fields.name.toUpperCase())&&parseFloat(r[i].difference.replace(",","."))-N.get(r[i].k.toUpperCase()+"|"+r[i].buy.fields.name.toUpperCase()+"|"+r[i].sell.fields.name.toUpperCase())>=.5&&f.add(r[i].k.toUpperCase());else{_.add(r[i].k.toUpperCase()),u.add(r[i].k.toUpperCase());var g=Array.from(N.keys());for(var m in g)g[m].substring(0,3)==r[i].k.toUpperCase()&&N.delete(g[m])}N.set(r[i].k.toUpperCase()+"|"+r[i].buy.fields.name.toUpperCase()+"|"+r[i].sell.fields.name.toUpperCase(),parseFloat(r[i].difference.replace(",",".")))}if(p.forEach(_.delete,_),document.hidden&&!window.IS_MOBILE&&"Notification"in window&&"granted"===Notification.permission&&t.alertsEnabled&&(u.size>0||f.size>0)){if(u.forEach(_.add,_),f.forEach(_.add,_),u.size>0){var S="",y=(i=1,JSON.parse(JSON.stringify(D)));u.forEach((function(e){2==i&&u.size==i?S+=" "+o.i18n.and+" "+e:2==i?S+=", "+e:1==i&&(S+=e),i++}));var C=0;2==u.size?(C=1,y.body=o.i18n["modulo-arbitrajes.alertas.alerta.text"]):u.size>2&&(C=2,y.body=o.i18n["modulo-arbitrajes.alertas.alerta.many.text"]),y.body=y.body.replace("$COIN",S),new Notification(["📣","🎉","🥳"][C]+" "+o.i18n["modulo-arbitrajes.alertas.alerta.title"],y).onclick=function(){window.focus(),o.dataLayer.push({event:"user_action",event_category:"notification",event_label:"click"})};var b=[];N.forEach((function(e,t){b.push(t+"|"+e)})),o.dataLayer.push({event:"system_action",event_category:"notification_sended",event_label:b.toString(",")})}if(f.size>0){var h=0;u.size>0&&(h=1e4),n((function(){var e="",t=1,r=JSON.parse(JSON.stringify(D));f.forEach((function(r){2==t&&f.size==t?e+=" "+o.i18n.and+" "+r:2==t?e+=", "+r:1==t&&(e+=r),t++})),f.size<=2?r.body=o.i18n["modulo-arbitrajes.alertas.alerta.more-profit.text"]:f.size>2&&(r.body=o.i18n["modulo-arbitrajes.alertas.alerta.more-profit.many.text"]),r.body=r.body.replace("$COIN",e),new Notification(["💰","📈","🔥"][Math.floor(3*Math.random())]+" "+o.i18n["modulo-arbitrajes.alertas.alerta.more-profit.title"],r).onclick=function(){window.focus(),o.dataLayer.push({event:"user_action",event_category:"notification",event_label:"click"})}}),h)}}}}),(function(e){304!==e.status&&L(!1),t.rollsLoadingStatus="determinate"}))}function L(r,a,i){if(a&&S[o.COUNTRY].has(a.toUpperCase()))return delete t.specificRollData[a],!1;if(a){for(var n in t.specificRollData[a]=t.specificRollData[a]||[],t.specificRollData[a])delete t.specificRollData[a][n].manuallySetted,t.specificRollData[a][n]=t.specificRollData[a][n]||{};if(i){for(var n in i)t.specificRollData[a][n]=t.specificRollData[a][n]||{},t.specificRollData[a][n].data=i[n],parseFloat(t.specificRollData[a][n].data.difference.replace(",","."))>=3.5&&t.specificRollData[a][n].data.buy.fields.score&&t.specificRollData[a][n].data.buy.fields.score.count>=10&&t.specificRollData[a][n].data.sell.fields.score&&t.specificRollData[a][n].data.sell.fields.score.count>=10&&t.specificRollData[a][n].data.buy.fields.score.average_transfer_speed_rating>=3.5&&t.specificRollData[a][n].data.sell.fields.score.average_transfer_speed_rating>=3.5?(t.specificRollData[a][n].score=3,t.trackSystem("unique_opportunity","show")):delete t.specificRollData[a][n].score,"ar"==o.COUNTRY&&"object"==e(t.specificRollData[a][n])&&"satoshitango"==t.specificRollData[a][n].data.buy.fields.id&&(t.specificRollData[a][n].data.buy.fields.infoAccess=!0,t.specificRollData[a][n].data.buy.fields.infoUrl="https://www.satoshitango.com/blog/como-comprar-bitcoins-con-satoshitango/"),"ar"==o.COUNTRY&&"object"==e(t.specificRollData[a][n])&&"satoshitango"==t.specificRollData[a][n].data.sell.fields.id&&(t.specificRollData[a][n].data.sell.fields.infoAccess=!0,t.specificRollData[a][n].data.sell.fields.infoUrl="https://www.satoshitango.com/blog/como-comprar-bitcoins-con-satoshitango/");t.carouselDataByCoin[a].index>=t.specificRollData[a].length&&(t.carouselDataByCoin[a].index=0)}else delete t.specificRollData[a]}else if(!r){var l=Object.keys(t.specificRollData);for(var n in l)delete t.specificRollData[l[n]]}}t.showFiltersDialog=function(e){O||(t.visibleFiltersDialog=!0,l.show({templateUrl:"/"+o.COUNTRY+"/partials/filters-dialog",controller:function(){return f},controllerAs:"ctrl",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,onRemoving:function(){t.visibleFiltersDialog=!1;try{m[o.COUNTRY][t.currencySelected]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_providers_"+t.currencySelected))),y[o.COUNTRY]=new Set(JSON.parse(o.localStorage.getItem(o.COUNTRY+"_blocked_cryptos")))}catch(e){}}}))};var Y=!1,x=!1;t.showRollCalculatorDialog=function(e,r,a){Y=!1,x=!1,f.showCalculatorWarning=!1,o.dataLayer.push({event:"user_action",event_category:"roll_calculator",event_label:"open_"+r+"_"+t.currencySelected}),t.selectedCoinForRoll=r,f.selectedCoinForRoll=r,f.rollCalculator={amount:"BTC"!=r.toUpperCase()&&"ETH"!=r.toUpperCase()?(1e3*t.specificRollData[f.selectedCoinForRoll][a].data.buy.fields[t.currencySelected].ask).toString().replace(".",","):t.specificRollData[f.selectedCoinForRoll][a].data.buy.fields[t.currencySelected].ask.toString().replace(".",",")},f.calculatorRollData=Object.assign({},t.specificRollData[r][a]);var i=t.specificRollData[r][a].data.buy.fields.id+"-"+t.specificRollData[r][a].data.sell.fields.id,n=t.$watch("specificRollData[selectedCoinForRoll]",(function(e,r){var a=!1,n=!1;if(e)for(var l in e)if(e[l].data.buy.fields.id+"-"+e[l].data.sell.fields.id==i){e=e[l],a=!0;break}if(e&&!a&&(e=void 0),r)for(var l in r)if(r[l].data.buy.fields.id+"-"+r[l].data.sell.fields.id==i){r=r[l],n=!0;break}r&&!n&&(r=void 0),e&&e.manuallySetted||e===r||(Y||e&&(!e||e===r||e.data.buy.fields.name===r.data.buy.fields.name&&e.data.sell.fields.name===r.data.sell.fields.name)?Y||x||e===r||e.data.buy.fields.name!==r.data.buy.fields.name||e.data.sell.fields.name!==r.data.sell.fields.name||e.data.buy.fields[t.currencySelected].ask===r.data.buy.fields[t.currencySelected].ask&&e.data.sell.fields[t.currencySelected].bid===r.data.sell.fields[t.currencySelected].bid||(x=!0,f.calculatorWarningText=o.i18n["modulo-arbitrajes.calculadora.roll-updated"],f.calculatorWarningCTAText=o.i18n["modulo-arbitrajes.calculadora.roll-updated.cta"],f.calculatorWarningCTAAvailable=!0,f.showCalculatorWarning=!0):(Y=!0,f.calculatorWarningText=o.i18n["modulo-arbitrajes.calculadora.roll-unavailable"],f.calculatorWarningCTAAvailable=!1,f.showCalculatorWarning=!0))}),!0);t.selectedRollIndexNumber=a,l.show({templateUrl:"/"+o.COUNTRY+"/partials/roll-calculator-dialog",controller:function(){return f},controllerAs:"ctrl",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,onRemoving:function(){n()}})},t.updateValuesInRollCalculator=function(){f.calculatorWarningCTAAvailable&&(t.specificRollData[f.selectedCoinForRoll][t.selectedRollIndexNumber].manuallySetted=!0,f.calculatorRollData=Object.assign({},t.specificRollData[f.selectedCoinForRoll][t.selectedRollIndexNumber]),f.showCalculatorWarning=!1,x=!1)},f.updateValuesInRollCalculator=t.updateValuesInRollCalculator,t.getMinimumRollInversion=function(e){if(!e||!e.buy.fields[t.currencySelected]||!e.sell.fields[t.currencySelected])return!1;if(e){var r=1e6/e.buy.fields[t.currencySelected].ask*e.sell.fields[t.currencySelected].bid-1e6;return 1e6*(t.minimumRollInversionPerCountry[o.COUNTRY]+e.gas_costs)/r}},t.showAlertsPermissionDialog=function(e,r){t.alertsForcedFiltersStep=r,r?f.customizeAlerts():(f.step1Alerts=!0,f.step2Alerts=!1,f.step3Alerts=!1),f.availableOptionsForAlerts=t.availableOptionsForAlerts,l.show({templateUrl:"/"+o.COUNTRY+"/partials/alerts-permission-dialog",controller:function(){return f},controllerAs:"ctrl",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0})};var F={body:o.i18n["modulo-arbitrajes.alertas.alerta.welcome.text"],icon:"/static/img/logo-web.png?v1"},B={body:o.i18n["modulo-arbitrajes.alertas.alerta.welcome.custom-alerts.text"],icon:"/static/img/logo-web.png?v1"};if(t.customAlertsEnabled)try{t.availableOptionsForAlerts=JSON.parse(o.localStorage.getItem(o.COUNTRY+"_custom_alerts_config"))||{}}catch(e){t.availableOptionsForAlerts={coins:[],profit:void 0}}else t.availableOptionsForAlerts={coins:[],profit:void 0};if(t.availableOptionsForAlerts.coins||0==t.availableOptionsForAlerts.coins.length)for(var I in t.availableOptionsForAlerts={coins:[],profit:void 0},E)t.availableOptionsForAlerts.coins.push({code:E[I],selected:!1});else for(var I in E){var M=!1;for(var j in t.availableOptionsForAlerts.coins)t.availableOptionsForAlerts.coins[j].code==E[I]&&(M=!0);M||t.availableOptionsForAlerts.coins.push({code:E[I],selected:!1})}t.isCoinsIndeterminatedInAlertCustomization=function(){return t.availableOptionsForAlerts.coins.filter((function(e){return e.selected})).length>0&&!t.allCoinsSelectedInAlertCustomization()},f.isCoinsIndeterminatedInAlertCustomization=t.isCoinsIndeterminatedInAlertCustomization,t.allCoinsSelectedInAlertCustomization=function(){return 0===t.availableOptionsForAlerts.coins.filter((function(e){return!e.selected})).length},f.allCoinsSelectedInAlertCustomization=t.allCoinsSelectedInAlertCustomization,t.anyCoinSelectedInCustomization=function(){return t.availableOptionsForAlerts.coins.filter((function(e){return e.selected})).length>0},f.anyCoinSelectedInCustomization=t.anyCoinSelectedInCustomization,t.toggleAllCoinsInAlertCustomization=function(){t.allCoinsSelectedInAlertCustomization()?t.availableOptionsForAlerts.coins.forEach((function(e){e.selected=!1})):t.availableOptionsForAlerts.coins.filter((function(e){return!e.selected})).forEach((function(e){e.selected=!0}))},f.toggleAllCoinsInAlertCustomization=t.toggleAllCoinsInAlertCustomization,f.customizeAlerts=function(){f.step1Alerts=!1,f.step2Alerts=!0,f.step3Alerts=!1},f.enableAlerts=function(){f.step1Alerts=!1,f.step2Alerts=!1,f.step3Alerts=!0,t.customAlertsConfig=t.availableOptionsForAlerts;try{o.localStorage.setItem(o.COUNTRY+"_custom_alerts_config",angular.toJson(t.customAlertsConfig))}catch(e){}if(o.dataLayer.push({event:"user_action",event_category:"notifications_configured",event_label:t.customAlertsConfig.coins.filter((function(e){return e.selected})).map((function(e){return e.code})).toString(",")+"|"+t.customAlertsConfig.profit}),"Notification"in window&&"granted"===Notification.permission){t.cancelModal();try{o.localStorage.getItem(o.COUNTRY+"_custom_alerts_enabled")?t.alertsForcedFiltersStep?u.sendSnackbarAlert(o.i18n["modulo-arbitrajes.alertas.alerta.saved"]):new Notification(o.i18n["modulo-arbitrajes.alertas.alerta.welcome.title"],F):new Notification(o.i18n["modulo-arbitrajes.alertas.alerta.custom-alerts.welcome"],B)}catch(e){}t.alertsEnabled=!0,t.customAlertsEnabled=!0;try{o.localStorage.removeItem(o.COUNTRY+"_generic_alerts_enabled"),o.localStorage.setItem(o.COUNTRY+"_custom_alerts_enabled",!0)}catch(e){}o.dataLayer.push({event:"notifications_change",event_category:"user_action",event_label:"re_enabled_with_customization"})}else"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){if("granted"===e){t.cancelModal(),new Notification(o.i18n["modulo-arbitrajes.alertas.alerta.welcome.title"],F),t.alertsEnabled=!0,t.customAlertsEnabled=!0;try{o.localStorage.removeItem(o.COUNTRY+"_generic_alerts_enabled"),o.localStorage.setItem(o.COUNTRY+"_custom_alerts_enabled",!0)}catch(e){}o.dataLayer.push({event:"user_action",event_category:"notifications_change",event_label:"enabled_with_customization"})}else o.dataLayer.push({event:"user_action",event_category:"notifications_change",event_label:"rejected_with_customization"})}))},t.disableAlerts=function(){t.cancelModal(),t.alertsEnabled=!1,t.customAlertsEnabled=!1,t.customAlertsConfig={};try{o.localStorage.setItem(o.COUNTRY+"_generic_alerts_enabled",!1),o.localStorage.setItem(o.COUNTRY+"_custom_alerts_enabled",!1),o.localStorage.removeItem(o.COUNTRY+"_custom_alerts_config")}catch(e){}u.sendSnackbarAlert(o.i18n["modulo-arbitrajes.alertas.disabled.text"]),o.dataLayer.push({event:"notifications_change",event_category:"user_action",event_label:"disabled"})},f.disableAlerts=t.disableAlerts,t.cancelModal=function(){l.cancel()},f.cancelModal=t.cancelModal;var $,J=($=".comparative-tables-menu-item",function(e,t,r){this._mdPanelRef=e,this.$timeout=t,this.$window=r,this.custom_class=$});if(J.$inject=["mdPanelRef","$timeout","$window"],J.prototype.$onInit=function(){this.$timeout((function(){var e=document.querySelector(this.custom_class+".selected");e?angular.element(e).focus():angular.element(document.querySelectorAll(this.custom_class)[0]).focus()}))},J.prototype.selectOption=function(e){this._mdPanelRef&&this._mdPanelRef.close().then((function(){o.location.href=e}))},J.prototype.indexOf=function(e,t){for(var r,o=0;r=e[o];o++)if(r===t)return o;return-1},J.prototype.onMouseOver=function(e){angular.element(e.srcElement||e.target).focus()},J.prototype.onKeydown=function(e,t){var r,o;switch(e.which){case 38:(o=document.querySelectorAll(this.custom_class))[(this.indexOf(o,document.activeElement)+o.length-1)%o.length].focus(),r=!0;break;case 40:(o=document.querySelectorAll(this.custom_class))[(this.indexOf(o,document.activeElement)+1)%o.length].focus(),r=!0;break;case 13:case 32:this.selectOption(t),r=!0;break;case 9:this._mdPanelRef&&this._mdPanelRef.close()}r&&(e.preventDefault(),e.stopImmediatePropagation())},t.showComparativeTablesMenu=function(e,t,r,a){var i=s.newPanelPosition().relativeTo(".comparative-tables-menu-button-"+r+"-"+t+"-"+a.fields.id).addPanelPosition(s.xPosition.ALIGN_START,s.yPosition.BELOW),n={options:[]};-1==a.fields.id.indexOf("p2p")&&n.options.push({text:"Ficha técnica",url:o.SITE_URL+o.TECHNICAL_DATA_URL+"/"+("ripio-exchange"==a.fields.id?"ripio":a.fields.id)}),n.options.push({text:o.i18n["provider-reviews.title"],url:o.SITE_URL+o.i18n["ranking.url"]+"/"+("ripio-exchange"==a.fields.id?"ripio":a.fields.id)+"/"});var l={attachTo:angular.element(document.body),controller:J,controllerAs:"ctrl",template:'<div class="comparative-tables-menu"      role="listbox">  <div class="comparative-tables-menu-item"        tabindex="-1"        role="option"        ng-repeat="option in ctrl.options"        ng-click="ctrl.selectOption(option.url)"       ng-mouseover="ctrl.onMouseOver($event)"       ng-keydown="ctrl.onKeydown($event, option.url)">    {{ option.text }}   </div></div>',position:i,locals:n,openFrom:e,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,zIndex:10};s.open(l)},!window.IS_MOBILE&&"Notification"in window){if("granted"!==Notification.permission||!t.alertsEnabled){t.alertsEnabled=!1;try{o.localStorage.setItem(o.COUNTRY+"_generic_alerts_enabled",!1)}catch(e){}}}else{t.alertsEnabled=!1;try{o.localStorage.setItem(o.COUNTRY+"_generic_alerts_enabled",!1)}catch(e){}}t.coinDataForPriceTables=[];var z={};function V(e){if(!(["DAI","USDT","USDC","BUSD","UST"].indexOf(e.toUpperCase())>-1)){var r=o.PRICES_ENDPOINT+"/coin-stats/"+e+"?simple=true";a.get(r,{headers:{"If-None-Match":z[e]}}).then((function(r){var o;z[e]=r.headers("Etag"),t.coinDataForPriceTables[e]=t.coinDataForPriceTables[e]||{},t.coinDataForPriceTables[e].priceData=r.data,t.coinDataForPriceTables[e].percentageColor={"background-color":(o=r.data.price_change_percentage_24h,-1==o.indexOf("-")?"green":"red")}}),(function(e){304!==e.status&&o.reportError(e)}))}}var W=["ask","bid"],H=[],X=[];for(var I in k(),o.AVAILABLE_COINS){for(var q in W)U(o.AVAILABLE_COINS[I],W[q]),H[o.AVAILABLE_COINS[I]+W[q]]={interval:i((function(e,t){U(e,t)}),6e4,0,!0,o.AVAILABLE_COINS[I],W[q]),handled:!0},function(e,t){b.push((function(){U(e,t)}))}(o.AVAILABLE_COINS[I],W[q]);V(o.AVAILABLE_COINS[I].toLowerCase()),X[o.AVAILABLE_COINS[I].toLowerCase()]={interval:i((function(e){V(e)}),6e4,0,!0,o.AVAILABLE_COINS[I].toLowerCase()),handled:!0}}var G,K,Z=i(k,6e4),Q=!0;document.addEventListener("visibilitychange",(function(){var e=t.getAlertsEnabled();for(var r in e||(Q=!0,i.cancel(Z),n.cancel(G),document.hidden?Q=!1:(Z=i(k,6e4),G=n(k,500))),o.AVAILABLE_COINS){var a=o.AVAILABLE_COINS[r];for(var l in W){var c=W[l];H[a+c]=H[a+c]||{};var s=H[a+c];s.handled=!0,i.cancel(s.interval),n.cancel(s.future_execution),document.hidden?s.handled=!1:(s.interval=i((function(e,t){U(e,t)}),6e4,0,!0,a,c),s.future_execution=n((function(e,t){U(e,t)}),500,!0,a,c))}X[a.toLowerCase()]=X[a.toLowerCase()]||{},X[a.toLowerCase()].handled=!0,i.cancel(X[a.toLowerCase()].interval),n.cancel(X[a.toLowerCase()].future_execution),document.hidden?X[a.toLowerCase()].handled=!1:(X[a.toLowerCase()].interval=i((function(e){V(e)}),6e4,0,!0,a.toLowerCase()),X[a.toLowerCase()].future_execution=n((function(e){V(e)}),500,!0,a.toLowerCase()))}})),window.addEventListener("focus",(function(){var e=t.getAlertsEnabled();for(var r in e||(n.cancel(K),K=n((function(){Q||(i.cancel(Z),n.cancel(G),Z=i(k,6e4),G=n(k,1),Q=!0)}),499)),o.AVAILABLE_COINS){var a=o.AVAILABLE_COINS[r];for(var l in W){var c=W[l];H[a+c]=H[a+c]||{};var s=H[a+c];n.cancel(s.focusTimeout),s.focusTimeout=n((function(){s.handled||(i.cancel(s.interval),n.cancel(s.future_execution),s.interval=i((function(e,t){U(e,t)}),6e4,0,!0,a,c),s.future_execution=n((function(e,t){U(e,t)}),1,!0,a,c))}),499)}X[a.toLowerCase()]=X[a.toLowerCase()]||{},n.cancel(X[a.toLowerCase()].focusTimeout),X[a.toLowerCase()].focusTimeout=n((function(){X[a.toLowerCase()]||(i.cancel(X[a.toLowerCase()].interval),n.cancel(X[a.toLowerCase()].future_execution),X[a.toLowerCase()].interval=i((function(e){V(e)}),6e4,0,!0,a.toLowerCase()),X[a.toLowerCase()].future_execution=n((function(e){V(e)}),1,!0,a.toLowerCase()))}),499)}}))}]).filter("makePositive",(function(){return function(e){return Math.abs(e)}})).directive("sanitizeCalculatorInput",(function(){return{require:"ngModel",link:function(e,t,r,o){e.$watch(r.ngModel,(function(e){null!=e&&(o.$setViewValue(String(e).replace(/,/g,".").replace(/\$/g,"").substring(0,9)),t.val(String(e).replace(/,/g,".").replace(/\$/g,"").substring(0,9)))}))}}})).directive("input",(function(){return{restrict:"E",require:"ngModel",link:function(e,t,r,o){"number"===t[0].type&&(o.$parsers.push((function(e){return Number(e)})),o.$formatters.push((function(e){return parseFloat(e,10)})))}}}))})();