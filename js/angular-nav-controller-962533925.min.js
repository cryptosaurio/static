var e=angular.module("app");e.controller("NavController",["$scope","$window","$http","$interval","$timeout","commonFunctionsService",function(c,e,n,i,o,a){c.isSponsoredInNavAlreadyClicked=a.isSponsoredInNavAlreadyClicked,c.hideSponsoredDotInNav=a.hideSponsoredDotInNav,c.coin_prices={},c.usd_prices={},loadcoinprices_etag=null,loadCoinPrices=function(){n.get(e.PRICES_ENDPOINT+"/prices/general_coin_prices",{headers:{"If-None-Match":loadcoinprices_etag}}).then(function(e){loadcoinprices_etag=e.headers("Etag"),updateCoinPrices(e.data)},function(e){})},loadusprices_etag=null,loadUsdPrices=function(){n.get(e.PRICES_ENDPOINT+"/prices/general_usd_prices",{headers:{"If-None-Match":loadusprices_etag}}).then(function(e){loadusprices_etag=e.headers("Etag"),updateUsdPrices(e.data)},function(e){})},updateCoinPrices=function(e){c.coin_prices=e},updateUsdPrices=function(e){c.usd_prices=e},loadCoinPrices(),loadUsdPrices();var d,s,r,t=i(loadCoinPrices,6e4),l=i(loadUsdPrices,6e4),u=!0;document.addEventListener("visibilitychange",function(){u=!0,i.cancel(t),i.cancel(l),o.cancel(d),o.cancel(s),document.hidden?u=!1:(d=o(loadCoinPrices,500),s=o(loadUsdPrices,500),t=i(loadCoinPrices,6e4),l=i(loadUsdPrices,6e4))}),window.addEventListener("focus",function(){o.cancel(r),r=o(function(){u||(i.cancel(t),i.cancel(l),o.cancel(d),o.cancel(s),d=o(loadCoinPrices,1),s=o(loadUsdPrices,1),t=i(loadCoinPrices,6e4),l=i(loadUsdPrices,6e4),u=!0)},499)})}]);