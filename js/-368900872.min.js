!function(){"use strict";angular.module("mdDataTable",["mdtTemplates","ngMaterial","ngMdIcons","ngSanitize"])}(),function(){"use strict";function e(e,t,a,n,o,r){o(function(){var e=angular.element("md-dialog");e.css("position","fixed"),e.css("top",t.top),e.css("left",t.left),e.find('input[type="text"]').focus()}),e.cellData=a,e.mdtTranslations=n,e.saveRow=function(){e.editFieldForm.$valid&&r.hide(a.value)},e.cancel=function(){r.cancel()}}e.$inject=["$scope","position","cellData","mdtTranslations","$timeout","$mdDialog"],angular.module("mdDataTable").controller("InlineEditModalCtrl",e)}(),function(){"use strict";function e(o){return{restrict:"E",templateUrl:"/main/templates/mdtAlternateHeaders.html",transclude:!0,replace:!0,scope:!0,require:"^mdtTable",link:function(t,e,a,n){t.deleteSelectedRows=function(){var e=n.dataStorage.deleteSelectedRows();t.deleteRowCallback({rows:e})},t.getNumberOfSelectedRows=o.bind(n.dataStorage.getNumberOfSelectedRows,n.dataStorage)}}}e.$inject=["_"],angular.module("mdDataTable").directive("mdtAlternateHeaders",e)}(),function(){"use strict";function e(e,o,i,l,s,c){return{restrict:"E",templateUrl:"/main/templates/mdtTable.html",transclude:!0,scope:{tableCard:"=",selectableRows:"=",alternateHeaders:"=",deleteRowCallback:"&",selectedRowCallback:"&",saveRowCallback:"&",animateSortIcon:"=",showOnClick:"=",rippleEffect:"=",paginatedRows:"=",mdtRow:"=",mdtRowPaginator:"&?",mdtRowAlertsEnabled:"&?",mdtRowPaginatorErrorMessage:"@",mdtRowPaginatorNoResultsMessage:"@",virtualRepeat:"=",mdtTriggerRequest:"&?",mdtTranslations:"=?",mdtLoadingIndicator:"=?"},controller:["$scope",function(o){var r=this;o.makeItVisible=!1,o.rippleEffectCallback=function(){return o.rippleEffect||!1},o.mdtTranslations=o.mdtTranslations||{},o.mdtTranslations.rowsPerPage=o.mdtTranslations.rowsPerPage||"Rows per page:",o.mdtTranslations.largeEditDialog=o.mdtTranslations.largeEditDialog||{},o.mdtTranslations.largeEditDialog.saveButtonLabel=o.mdtTranslations.largeEditDialog.saveButtonLabel||"Save",o.mdtTranslations.largeEditDialog.cancelButtonLabel=o.mdtTranslations.largeEditDialog.cancelButtonLabel||"Cancel",r.dataStorage=e.getInstance(),l.initFeature(o,r),s.initFeature(o,r),function(){if(c.isEmpty(o.mdtRow))return;angular.isUndefined(o.mdtRowPaginator)&&o.$watch("mdtRow",function(e){var a,n;r.dataStorage.storage=[],e=e.data,n=[],c.each(e,function(t){a=c.get(t,o.mdtRow["table-row-id-key"]),n=[],c.each(o.mdtRow["column-keys"],function(e){n.push({attributes:{editableField:!1},rowId:a,columnKey:e,value:c.get(t,e)})}),r.dataStorage.addRowData(a,n)})},!0)}()}],link:function(e,r,t,a,n){e.dataStorage=a.dataStorage,n(function(e){var t=[],a=[],n=[];c.each(e,function(e){(void 0!==e.classList?e.classList.contains("theadTrRow")?t:e.classList.contains("customCell")?n:a:a).push(e)});var o=r[0].querySelector(".mdtTable-reader");c.each(t,function(e){o.appendChild(e)}),c.each(a,function(e){o.appendChild(e)})}),o.addRequiredFunctions(e,a),i.getInstance({$scope:e,ctrl:a}),l.startFeature(a),s.initFeatureHeaderValues(e.dataStorage.header,a.columnSelectorFeature)}}}e.$inject=["TableDataStorageFactory","EditCellFeature","SelectableRowsFeature","PaginationFeature","ColumnSelectorFeature","_"],angular.module("mdDataTable").directive("mdtTable",e)}(),function(){"use strict";function e(a,n,t,s){function o(e){this.paginatorType=t.AJAX,this.dataStorage=e.dataStorage,this.rowOptions=e.mdtRowOptions,this.paginatorFunction=e.mdtRowPaginatorFunction,this.mdtRowPaginatorErrorMessage=e.mdtRowPaginatorErrorMessage||"Ajax error during loading contents.",this.mdtRowPaginatorNoResultsMessage=e.mdtRowPaginatorNoResultsMessage||"No results.",this.mdtTriggerRequest=e.mdtTriggerRequest,e.paginationSetting&&e.paginationSetting.hasOwnProperty("rowsPerPageValues")&&0<e.paginationSetting.rowsPerPageValues.length?this.rowsPerPageValues=e.paginationSetting.rowsPerPageValues:this.rowsPerPageValues=[10,20,30,50,100],this.rowsPerPage=this.rowsPerPageValues[0],this.page=1,this.totalResultCount=0,this.totalPages=0,this.isLoading=!1,this.mdtTriggerRequest&&e.mdtTriggerRequest({loadPageCallback:this.fetchPage.bind(this)})}return o.prototype.getStartRowIndex=function(){return(this.page-1)*this.rowsPerPage},o.prototype.getEndRowIndex=function(){var e=this.getStartRowIndex()+this.rowsPerPage-1;return this.totalResultCount<e?this.totalResultCount-1:e},o.prototype.getTotalRowsCount=function(){return this.totalResultCount},o.prototype.getRows=function(){return this.dataStorage.storage},o.prototype.previousPage=function(){var e=this;this.hasPreviousPage()&&this.fetchPage(this.page-1).then(function(){e.page--})},o.prototype.nextPage=function(){var e=this;this.hasNextPage()&&this.fetchPage(this.page+1).then(function(){e.page++})},o.prototype.getFirstPage=function(){this.page=1,this.fetchPage(this.page)},o.prototype.hasNextPage=function(){return this.page<this.totalPages},o.prototype.hasPreviousPage=function(){return 1<this.page},o.prototype.fetchPage=function(e){this.isLoading=!0;var t=this,e={page:e,pageSize:this.rowsPerPage,options:{}};return a.appendAppliedFiltersToCallbackArgument(this.dataStorage,e),n.appendSortedColumnToCallbackArgument(this.dataStorage,e),this.paginatorFunction(e).then(function(e){t.dataStorage.storage=[],t.setRawDataToStorage(t,e.results,t.rowOptions["table-row-id-key"],t.rowOptions["column-keys"],t.rowOptions),t.totalResultCount=e.totalResultCount,t.totalPages=Math.ceil(e.totalResultCount/t.rowsPerPage),0==t.totalResultCount?t.isNoResults=!0:t.isNoResults=!1,t.isLoadError=!1,t.isLoading=!1},function(e){304!==e.status?(t.dataStorage.storage=[],t.isLoadError=!0,t.isLoading=!1,t.isNoResults=!0):(t.isLoadError=!1,t.isLoading=!1)})},o.prototype.setRawDataToStorage=function(a,e,n,o,r){var i,l=[];s.each(e,function(t){i=s.get(t,n),l=[],s.each(o,function(e){l.push({attributes:{editableField:!1},rowId:i,columnKey:e,value:s.get(t,e)})});var e=!!r["table-row-class-name"]&&r["table-row-class-name"](t);a.dataStorage.addRowData(i,l,e)})},o.prototype.setRowsPerPage=function(e){this.rowsPerPage=e,this.getFirstPage()},{getInstance:function(e,t,a,n){return new o(e)}}}e.$inject=["ColumnFilterFeature","ColumnSortFeature","PaginatorTypeProvider","_"],angular.module("mdDataTable").service("mdtAjaxPaginationHelperFactory",e)}(),function(){"use strict";function e(e){if(!e._)throw Error("Lodash does not found. Please make sure you load Lodash before any source for mdDataTable");return e._}e.$inject=["$window"],angular.module("mdDataTable").factory("_",e)}(),function(){"use strict";function e(a,e){function n(e,t){this.paginatorType=a.ARRAY,this.dataStorage=e,t&&t.hasOwnProperty("rowsPerPageValues")&&0<t.rowsPerPageValues.length?this.rowsPerPageValues=t.rowsPerPageValues:this.rowsPerPageValues=[10,20,30,50,100],this.rowsPerPage=this.rowsPerPageValues[0],this.page=1}return n.prototype.calculateVisibleRows=function(){var a=this;e.each(this.dataStorage.storage,function(e,t){t>=a.getStartRowIndex()&&t<=a.getEndRowIndex()?e.optionList.visible=!0:e.optionList.visible=!1})},n.prototype.getStartRowIndex=function(){return(this.page-1)*this.rowsPerPage},n.prototype.getEndRowIndex=function(){var e=this.getStartRowIndex()+this.rowsPerPage-1;return this.dataStorage.storage.length<e?this.dataStorage.storage.length-1:e},n.prototype.getTotalRowsCount=function(){return this.dataStorage.storage.length},n.prototype.getRows=function(){return this.calculateVisibleRows(),this.dataStorage.storage},n.prototype.previousPage=function(){this.hasPreviousPage()&&this.page--},n.prototype.nextPage=function(){this.hasNextPage()&&this.page++},n.prototype.hasNextPage=function(){var e=Math.ceil(this.getTotalRowsCount()/this.rowsPerPage);return this.page<e},n.prototype.hasPreviousPage=function(){return 1<this.page},n.prototype.setRowsPerPage=function(e){this.rowsPerPage=e,this.page=1},{getInstance:function(e,t){return new n(e,t)}}}e.$inject=["PaginatorTypeProvider","_"],angular.module("mdDataTable").service("mdtPaginationHelperFactory",e)}(),function(){"use strict";function e(n,o){function e(){this.storage=[],this.header=[],this.customCells={}}return e.prototype.addHeaderCellData=function(e){this.header.push(e)},e.prototype.addRowData=function(e,t,a){t instanceof Array?this.storage.push({rowId:e,optionList:{selected:!1,deleted:!1,visible:!0,className:a||!1},data:t}):n.error("`rowArray` parameter should be array")},e.prototype.getRowData=function(e){if(this.storage[e])return this.storage[e].data;n.error("row is not exists at index: "+e)},e.prototype.getRowOptions=function(e){if(this.storage[e])return this.storage[e].optionList;n.error("row is not exists at index: "+e)},e.prototype.setAllRowsSelected=function(t,a){void 0!==t?o.each(this.storage,function(e){(!a||e.optionList.visible)&&(e.optionList.selected=!!t)}):n.error("`isSelected` parameter is required")},e.prototype.isAnyRowSelected=function(){return o.some(this.storage,function(e){return!0===e.optionList.selected&&!1===e.optionList.deleted})},e.prototype.getNumberOfSelectedRows=function(){var e=o.countBy(this.storage,function(e){return!0===e.optionList.selected&&!1===e.optionList.deleted?"selected":"unselected"});return e.selected||0},e.prototype.deleteSelectedRows=function(){var t=[];return o.each(this.storage,function(e){e.optionList.selected&&!1===e.optionList.deleted&&(e.rowId?t.push(e.rowId):t.push(e.data),e.optionList.deleted=!0)}),t},e.prototype.getSelectedRows=function(){var t=[];return o.each(this.storage,function(e){e.optionList.selected&&!1===e.optionList.deleted&&(e.rowId?t.push(e.rowId):t.push(e.data))}),t},e.prototype.getSavedRowData=function(e){var t=[];return o.each(e.data,function(e){t.push(e.value)}),t},{getInstance:function(){return new e}}}e.$inject=["$log","_"],angular.module("mdDataTable").factory("TableDataStorageFactory",e)}(),function(){"use strict";function e(a,n,i,l){this.initFeature=function(e,t){e.mdtRowPaginator?t.mdtPaginationHelper=e.mdtPaginationHelper=n.getInstance({dataStorage:t.dataStorage,paginationSetting:e.paginatedRows,mdtRowOptions:e.mdtRow,mdtRowPaginatorFunction:e.mdtRowPaginator,mdtRowPaginatorErrorMessage:e.mdtRowPaginatorErrorMessage,mdtRowPaginatorNoResultsMessage:e.mdtRowPaginatorNoResultsMessage,mdtTriggerRequest:e.mdtTriggerRequest}):t.mdtPaginationHelper=e.mdtPaginationHelper=a.getInstance(t.dataStorage,e.paginatedRows,e.mdtRow);e.isPaginationEnabled=function(){return!!(!0===e.paginatedRows||e.paginatedRows&&e.paginatedRows.hasOwnProperty("isEnabled")&&!0===e.paginatedRows.isEnabled)},t.paginationFeature={startPaginationFeature:function(){e.mdtRowPaginator&&e.mdtPaginationHelper.fetchPage(1)}},t.alertsEnabled=e.mdtRowAlertsEnabled},this.startFeature=function(t){t.paginationFeature.startPaginationFeature();var a,n,o=i(t.paginationFeature.startPaginationFeature,6e4),r=!0;document.addEventListener("visibilitychange",function(){var e=!1;"function"==typeof t.alertsEnabled&&(e=t.alertsEnabled()),e||(r=!0,i.cancel(o),l.cancel(a),document.hidden?r=!1:(o=i(t.paginationFeature.startPaginationFeature,6e4),a=l(t.paginationFeature.startPaginationFeature,5e3)))}),window.addEventListener("focus",function(){var e=!1;"function"==typeof t.alertsEnabled&&(e=t.alertsEnabled()),e||(l.cancel(n),n=l(function(){r||(i.cancel(o),l.cancel(a),o=i(t.paginationFeature.startPaginationFeature,6e4),a=l(t.paginationFeature.startPaginationFeature,1),r=!0)},4999))})}}e.$inject=["mdtPaginationHelperFactory","mdtAjaxPaginationHelperFactory","$interval","$timeout"],angular.module("mdDataTable").service("PaginationFeature",e)}(),function(){"use strict";function e(t){function a(e){this.$scope=e.$scope,this.ctrl=e.ctrl,this.$scope.onCheckboxChange=_.bind(this.onCheckboxChange,this)}return a.prototype.onCheckboxChange=function(){var e=this;t(function(){e.$scope.selectedRowCallback({rows:e.ctrl.dataStorage.getSelectedRows()})},0)},{getInstance:function(e){return new a(e)}}}e.$inject=["$timeout"],angular.module("mdDataTable").service("SelectableRowsFeature",e)}(),function(){"use strict";function e(t){this.getColumnAlignClass=function(e){return e===t.ALIGN_RULE.ALIGN_RIGHT?"rightAlignedColumn":"leftAlignedColumn"}}e.$inject=["ColumnOptionProvider"],angular.module("mdDataTable").service("ColumnAlignmentHelper",e)}(),function(){"use strict";angular.module("mdDataTable").value("ColumnOptionProvider",{ALIGN_RULE:{ALIGN_LEFT:"left",ALIGN_RIGHT:"right"}})}(),function(){"use strict";angular.module("mdDataTable").value("PaginatorTypeProvider",{AJAX:"ajax",ARRAY:"array"})}(),function(){"use strict";function e(i){return{restrict:"E",replace:!0,transclude:!0,require:"^mdtRow",link:function(t,e,a,n,o){var r={htmlContent:a.htmlContent||!1,editableField:a.editableField||!1,editableFieldTitle:a.editableFieldTitle||!1,editableFieldMaxLength:a.editableFieldMaxLength||!1};o(function(e){a.htmlContent?n.addToRowDataStorage(e,r):(e=i(e.html())(t.$parent),n.addToRowDataStorage(e,r))})}}}e.$inject=["$interpolate"],angular.module("mdDataTable").directive("mdtCell",e)}(),function(){"use strict";angular.module("mdDataTable").directive("mdtRow",function(){return{restrict:"E",transclude:!0,require:"^mdtTable",scope:{tableRowId:"="},controller:["$scope",function(a){this.addToRowDataStorage=function(e,t){a.rowDataStorage.push({value:e,attributes:t})},a.rowDataStorage=[]}],link:function(e,t,a,n,o){o(function(e){t.append(e)}),n.dataStorage.addRowData(e.tableRowId,e.rowDataStorage)}}})}(),function(){"use strict";function e(i,l,s,c){return{restrict:"E",transclude:!0,replace:!0,scope:{alignRule:"@",columnDefinition:"@",columnSort:"=?",columnSortDefaultOrder:"@",columnFilter:"=?",excludeFromColumnSelector:"=?",hideColumnByDefault:"=?"},require:["^mdtTable"],link:function(t,e,a,n,o){var r=n[0];o(function(e){e=i(e.html())(t.$parent),e={alignRule:t.alignRule,columnDefinitionAvailable:!!t.columnDefinition,columnDefinition:t.columnDefinition,columnName:e};l.appendHeaderCellData(t,e,r.dataStorage),s.appendHeaderCellData(e,t.columnSort,t.columnSortDefaultOrder),c.appendHeaderCellData(e,r.columnSelectorFeature,t.excludeFromColumnSelector,t.hideColumnByDefault),r.dataStorage.addHeaderCellData(e)})}}}e.$inject=["$interpolate","ColumnFilterFeature","ColumnSortFeature","ColumnSelectorFeature"],angular.module("mdDataTable").directive("mdtColumn",e)}(),function(){"use strict";function e(o,r){return{restrict:"E",templateUrl:"/main/templates/mdtGeneratedHeaderCellContent.html",replace:!0,scope:!1,require:"^mdtTable",link:function(e,t,a,n){o.initGeneratedHeaderCellContent(e,e.headerRowData,n.mdtPaginationHelper,n.dataStorage),e.columnClickHandler=function(){o.generatedHeaderCellClickHandler(e,e.headerRowData,t),r.columnClickHandler(e.headerRowData,n.dataStorage,n.mdtPaginationHelper,a.index)}}}}e.$inject=["ColumnFilterFeature","ColumnSortFeature"],angular.module("mdDataTable").directive("mdtGeneratedHeaderCellContent",e)}(),function(){"use strict";angular.module("mdDataTable").directive("mdtGeneratedHeaderRow",function(){return{restrict:"A",templateUrl:"/main/templates/mdtGeneratedHeaderRow.html"}})}(),function(){"use strict";angular.module("mdDataTable").directive("mdtHeaderRow",function(){return{restrict:"E",replace:!0,transclude:!0,require:"^mdtTable",scope:!0,link:function(e,t,a,n,o){o(function(e){t.append(e)})}}})}(),function(){"use strict";function e(a){return{restrict:"A",scope:{mdtAddAlignClass:"="},link:function(e,t){e=a.getColumnAlignClass(e.mdtAddAlignClass);t.addClass(e)}}}e.$inject=["ColumnAlignmentHelper"],angular.module("mdDataTable").directive("mdtAddAlignClass",e)}(),function(){"use strict";function e(a,l,s){return{restrict:"A",require:"^?mdtTable",link:function(e,o,t,r){var i;e.$watch(function(){return(i=a(t.mdtAddHtmlContentToCell)(e)).value},function(e){var t,a,n;o.empty(),i.columnKey&&r&&r.dataStorage.customCells[i.columnKey]?(a=(t=r.dataStorage.customCells[i.columnKey]).htmlContent,n=s.$new(),i.rowId&&(n.rowId=i.rowId),n.clientScope=t.scope,n.value=e,l(a)(n,function(e){o.append(e)})):o.append(e)},!1)}}}e.$inject=["$parse","$compile","$rootScope"],angular.module("mdDataTable").directive("mdtAddHtmlContentToCell",e)}(),function(){"use strict";angular.module("mdDataTable").directive("mdtAnimateSortIconHandler",function(){return{restrict:"A",scope:!1,link:function(e,t){e.animateSortIcon&&t.addClass("animate-sort-icon")}}})}(),function(){"use strict";angular.module("mdDataTable").directive("mdtCustomCell",function(){return{restrict:"E",transclude:!0,template:'<span class="customCell" ng-transclude></span>',require:"^mdtTable",link:{pre:function(a,e,n,o,t){t(function(e){var t=n.columnKey;o.dataStorage.customCells[t]={scope:a,htmlContent:e.clone()}})}}}})}(),function(){"use strict";angular.module("mdDataTable").directive("mdtSelectAllRowsHandler",function(){return{restrict:"A",scope:!1,require:"^mdtTable",link:function(t,e,a,n){t.selectAllRows=!1,t.$watch("selectAllRows",function(e){n.dataStorage.setAllRowsSelected(e,t.isPaginationEnabled())})}}})}(),function(){"use strict";angular.module("mdDataTable").directive("mdtCardHeader",function(){return{restrict:"E",templateUrl:"/main/templates/mdtCardHeader.html",transclude:!0,replace:!0,scope:!0,require:["^mdtTable"],link:function(e){e.isTableCardEnabled=!1,e.handleColumnChooserButtonClick=function(){e.columnSelectorFeature.isEnabled&&(e.columnSelectorFeature.isActive=!e.columnSelectorFeature.isActive)},e.tableCard&&!1!==e.tableCard.visible&&(e.isTableCardEnabled=!0)}}})}(),function(){"use strict";function e(o,r){var e=this;e.appendHeaderCellData=function(e,t,a){t.columnFilter={},e.columnFilter&&e.columnFilter.valuesProviderCallback?(t.columnFilter.isEnabled=!0,t.columnFilter.filtersApplied=[],t.columnFilter.valuesProviderCallback=e.columnFilter.valuesProviderCallback,t.columnFilter.valuesTransformerCallback=e.columnFilter.valuesTransformerCallback,t.columnFilter.placeholderText=e.columnFilter.placeholderText,t.columnFilter.type=e.columnFilter.filterType||"chips",t.columnFilter.type=e.columnFilter.filterType||"chips",t.columnFilter.isActive=!1,t.columnFilter.setColumnActive=function(e){_.each(a.header,function(e){e.columnFilter.isEnabled&&(e.columnFilter.isActive=!1)}),t.columnFilter.isActive=!!e}):t.columnFilter.isEnabled=!1},e.initGeneratedHeaderCellContent=function(e,t,a,n){t.columnFilter.isEnabled&&(e.columnFilterFeature={},e.columnFilterFeature.cancelFilterDialog=function(e){e&&e.stopPropagation(),t.columnFilter.setColumnActive(!1)},e.columnFilterFeature.confirmFilterDialog=function(e){e.event.stopPropagation(),t.columnFilter.setColumnActive(!1),t.columnFilter.filtersApplied=e.selectedItems,o.setHeaderSort(t,e.sortingData,n),a.paginatorType===r.AJAX&&a.getFirstPage()})},e.generatedHeaderCellClickHandler=function(e,t,a){t.columnFilter.isEnabled&&t.columnFilter.setColumnActive(!t.columnFilter.isActive)},e.appendAppliedFiltersToCallbackArgument=function(e,t){var a=[],n=!1;_.each(e.header,function(e){var t=e.columnFilter.filtersApplied||[];e.columnFilter.isEnabled&&(n=!0),a.push(t)}),n&&(t.options.columnFilter=a)},e.resetFiltersForColumn=function(e,t){return!!(e.header[t].columnFilter&&e.header[t].columnFilter.isEnabled&&e.header[t].columnFilter.filtersApplied.length)&&(e.header[t].columnFilter.filtersApplied=[],!0)},e.positionColumnFilterBox=function(e){var t=e.closest("th").offset(),a=t.top+60,t=t.left;e.css("position","absolute"),e.detach().appendTo("body"),e.css({top:a+"px",left:t+"px",position:"absolute"})}}e.$inject=["ColumnSortFeature","PaginatorTypeProvider"],angular.module("mdDataTable").service("ColumnFilterFeature",e)}(),function(){"use strict";angular.module("mdDataTable").service("ColumnSelectorFeature",function(){this.appendHeaderCellData=function(e,t,a,n){t.isEnabled&&(e.columnSelectorFeature={},e.columnSelectorFeature.isExcluded=!!a,e.columnSelectorFeature.isHidden=!!n)},this.initFeature=function(e,t){e.columnSelectorFeature={},e.tableCard&&e.tableCard.columnSelector?e.columnSelectorFeature.isEnabled=!0:e.columnSelectorFeature.isEnabled=!1,t.columnSelectorFeature=e.columnSelectorFeature},this.initFeatureHeaderValues=function(e,t){t&&t.isEnabled&&_.each(e,function(e){e.columnSelectorFeature.isVisible=!e.columnSelectorFeature.isHidden})},this.positionElement=function(e){var t=e.parent().find(".mdt-column-chooser-button"),a=t.offset(),t=angular.element(window).width()-(a.left+t.outerWidth()),a=a.top+55,t=t;e.css("position","absolute"),e.detach().appendTo("body"),e.css({top:a+"px",right:t+"px",position:"absolute"})}})}(),function(){"use strict";function e(r){var e=this;function i(e,t){var a=e.columnSort.sort;_.each(t.header,function(e){e.columnSort.sort=!1}),e.columnSort.sort=a}e.appendHeaderCellData=function(e,t,a){e.columnSort={},t?(e.columnSort.isEnabled=!0,e.columnSort.sort=!1,e.columnSort.comparator=t.comparator||!1,e.columnSort.defaultOrder=a):e.columnSort.isEnabled=!1},e.setHeaderSort=function(e,t,a){t&&(e.columnSort.sort=t.columnSort&&t.columnSort.sort===r.ASC?r.ASC:r.DESC,i(e,a))},e.columnClickHandler=function(e,t,a,n){var o;e.columnSort.isEnabled&&(e.columnFilter.isEnabled||(i(e,t),!1===(o=e).columnSort.sort?o.columnSort.sort=r.ASC:o.columnSort.sort===r.ASC?o.columnSort.sort=r.DESC:o.columnSort.sort=!1,e.columnSort.columnIndex=n,function(a,e){var t,n=a.columnSort.columnIndex;t="function"==typeof a.columnSort.comparator?function(e,t){return a.columnSort.comparator(e.data[n].value,t.data[n].value)}:function(e,t){return"string"==typeof e.data[n].rowId&&"string"==typeof t.data[n].rowId?e.data[n].rowId>t.data[n].rowId?1:e.data[n].rowId<t.data[n].rowId?-1:0:e.data[n].rowId-t.data[n].rowId};e.storage.sort(t),a.columnSort.sort===r.DESC&&e.storage.reverse()}(e,t)))},e.appendSortedColumnToCallbackArgument=function(e,t){var a=[],n=!1;_.each(e.header,function(e){e.columnSort.sort=e.columnSort.sort||e.columnSort.defaultOrder||!1;var t=e.columnSort.sort||!1;a.push({sort:t}),e.columnSort.isEnabled&&(n=!0)}),n&&(t.options.columnSort=a)},e.sortingCallback=function(e,t){e.preventDefault(),0==t.columnSort.sort?t.columnSort.sort=r.ASC:t.columnSort.sort===r.ASC?t.columnSort.sort=r.DESC:t.columnSort.sort=!1}}e.$inject=["ColumnSortDirectionProvider"],angular.module("mdDataTable").service("ColumnSortFeature",e)}(),function(){"use strict";function e(i){this.addRequiredFunctions=function(r,t){r.saveRow=function(e){e=t.dataStorage.getSavedRowData(e);r.saveRowCallback({row:e})},r.showEditDialog=function(e,t,a){var n=e.currentTarget.closest("td").getBoundingClientRect(),n={controller:"InlineEditModalCtrl",targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!1,locals:{position:{top:n.top,left:n.left},cellData:JSON.parse(JSON.stringify(t)),mdtTranslations:r.mdtTranslations}};"smallEditDialog"===t.attributes.editableField?n.templateUrl="/main/templates/smallEditDialog.html":n.templateUrl="/main/templates/largeEditDialog.html";var o=this;i.show(n).then(function(e){t.value=e,o.saveRow(a)})}}}e.$inject=["$mdDialog"],angular.module("mdDataTable").service("EditCellFeature",e)}(),function(){"use strict";function e(t){return{restrict:"E",templateUrl:"/main/templates/cells/generateSortingIcons.html",scope:{data:"=",size:"@"},link:function(e){e.ColumnSortDirectionProvider=t}}}e.$inject=["ColumnSortDirectionProvider"],angular.module("mdDataTable").directive("mdtSortingIcons",e)}(),function(){"use strict";angular.module("mdDataTable").value("ColumnSortDirectionProvider",{ASC:"asc",DESC:"desc"})}(),angular.module("mdtTemplates",[]).run(["$templateCache",function(e){e.put("/main/templates/generateTable.html",'<table cellpadding="0" cellspacing="0"><thead mdt-generated-header-row></thead><tbody ng-include src="\'/main/templates/rows/generateRows.html\'"></tbody></table>'),e.put("/main/templates/mdtCardHeader.html",'<div ng-show="tableCard && tableCard.title" class="mdt-header" layout="row" layout-align="start center"><span flex ng-bind-html="tableCard.title"></span>\x3c!----\x3e</div>'),e.put("/main/templates/mdtGeneratedHeaderCellContent.html",'<div class="p-r no-outline column-header-content" ng-class="{\'clickable\': headerRowData.columnSort.isEnabled}" ng-click="columnClickHandler()"><div ng-if="headerRowData.columnSort.isEnabled"><md-tooltip ng-if="headerRowData.columnDefinitionAvailable" ng-show="headerRowData.columnDefinition">{{headerRowData.columnDefinition}}</md-tooltip><mdt-sorting-icons size="16" data="headerRowData" ng-show="headerRowData.alignRule == \'right\' && !headerRowData.columnFilter.isEnabled"></mdt-sorting-icons><span ng-include src="\'/main/templates/cells/generateCellValue.html\'"></span><mdt-sorting-icons size="16" data="headerRowData" ng-show="headerRowData.alignRule == \'left\' && !headerRowData.columnFilter.isEnabled"></mdt-sorting-icons></div><div ng-if="!headerRowData.columnSort.isEnabled"><md-tooltip ng-if="headerRowData.columnDefinitionAvailable" ng-show="headerRowData.columnDefinition">{{headerRowData.columnDefinition}}</md-tooltip><span ng-include src="\'/main/templates/cells/generateCellValue.html\'" class="no-outline"></span></div></div>'),e.put("/main/templates/mdtGeneratedHeaderRow.html",'<tr class="theadTrRow"mdt-animate-sort-icon-handler>\x3c!-- TODO: fix text-align:left, in theory it should not be there to make it work --\x3e<th class="checkboxCell"style="text-align:left;"ng-show="selectableRows"mdt-select-all-rows-handler></th><th class="column"ng-repeat="headerRowData in dataStorage.header track by $index"ng-if="!headerRowData.columnSelectorFeature || headerRowData.columnSelectorFeature.isVisible"mdt-add-align-class="headerRowData.alignRule"ng-click="clickHandler($index, headerRowData)"md-ink-ripple="{{ rippleEffectCallback() }}"><mdt-generated-header-cell-content index="{{$index}}"></mdt-generated-header-cell-content></th></tr>'),e.put("/main/templates/mdtTable.html",'<md-content class="mdtTableContainer md-whiteframe-z1" ng-cloak>\x3c!-- table card --\x3e<mdt-card-header ng-hide="alternateHeaders && dataStorage.isAnyRowSelected()"></mdt-card-header><md-content class="mdtTable" layout="column">\x3c!-- parsing transcluded content in order to be executed --\x3e<div class="mdtTable-reader" style="display:none;"></div><md-progress-linear ng-if="mdtPaginationHelper.isLoading" md-mode="indeterminate" class="loading-indicator" ng-class="{\'loading-is-active\': mdtPaginationHelper.isLoading}"></md-progress-linear><ng-include src="\'/main/templates/generateTable.html\'"></ng-include></md-content>\x3c!-- table card --\x3e\x3c!-- table card end --\x3e</md-content><style ng-if="mdtLoadingIndicator">md-progress-linear.loading-indicator .md-bar{background: {{mdtLoadingIndicator[\'color\']}};}</style>'),e.put("/main/templates/cells/generateCell.html",'\x3c!-- non editable field --\x3e<span mdt-add-html-content-to-cell="cellData"></span>'),e.put("/main/templates/cells/generateCellValue.html",'<span ng-if="!headerRowData.columnFilter.isEnabled">{{headerRowData.columnName}}</span>'),e.put("/main/templates/cells/generateSortingIcons.html",'<span class="hoverSortIcons" ng-if="data.columnSort.sort == false"><ng-md-icon icon="arrow_forward" size="{{size}}"></ng-md-icon></span><span class="sortedColumn" ng-if="data.columnSort.sort !== false" ng-class="data.columnSort.sort === ColumnSortDirectionProvider.ASC ? \'ascending\' : \'descending\'"><ng-md-icon icon="arrow_forward" size="{{size}}"></ng-md-icon></span>'),e.put("/main/templates/rows/errorIndicator.html",'<td colspan="999" class="errorMessage"><ng-bind-html ng-bind-html="mdtPaginationHelper.mdtRowPaginatorErrorMessage"></ng-bind-html></td>'),e.put("/main/templates/rows/generateRows.html",'<tr class="tbodyTrRow"ng-repeat="rowData in mdtPaginationHelper.getRows() track by $index"><td class="column"ng-repeat="cellData in rowData.data track by $index"mdt-add-align-class="dataStorage.header[$index].alignRule"style="position:relative;"ng-include src="\'/main/templates/cells/generateCell.html\'">\x3c!-- generate cell content --\x3e</td></tr><tr ng-show="mdtPaginationHelper.isLoadError"ng-include src="\'/main/templates/rows/errorIndicator.html\'"></tr><tr ng-show="mdtPaginationHelper.isNoResults && !mdtPaginationHelper.isLoadError"ng-include src="\'/main/templates/rows/noResultIndicator.html\'"></tr>'),e.put("/main/templates/rows/noResultIndicator.html",'<td colspan="999" class="noResultMessage"><ng-bind-html ng-bind-html="mdtPaginationHelper.mdtRowPaginatorNoResultsMessage"></ng-bind-html></td>')}]),angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","mdDataTable","ngclipboard","angular.snackbar","tooltips"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider",function(e,t,a,n){e.decorator("$locale",["$delegate",function(e){return e.NUMBER_FORMATS.DECIMAL_SEP=",",e.NUMBER_FORMATS.GROUP_SEP=".",e}]),t.debugInfoEnabled(!1),a.disableTheming(!0),n.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/*","**/static/**"])}]);var e=angular.module("app");e.service("providersService",function(){var t=new Set;this.get=function(){return Array.from(t).sort()},this.add=function(e){t.add(e)},this.delete=function(e){t.delete(e)},this.clear=function(){t.clear()}}),(e=angular.module("app")).controller("MainController",["$scope","$rootScope","$window","$q","$http","$interval","$timeout","$mdDialog","$animate","providersService","commonFunctionsService",function(g,e,p,t,a,o,f,n,r,i,l){g.tooltipCopySuccessful=l.tooltipCopySuccessful,g.track=l.track,g.trackSystem=l.trackSystem,r.enabled(angular.element(document.getElementById("roll-calculator-dialog")),!1),g.redirectTo=function(e){p.location.href=e};g.currencySelected=-1<["ARS","USD"].indexOf(p.localStorage.getItem("currency_selected"))?p.localStorage.getItem("currency_selected"):p.localStorage.removeItem("currency_selected")||"ARS";var s=[y];g.visibleFiltersDialog=!1;var h={},c={},d=!1,S=new Set,b=new Map;g.IS_MOBILE=window.IS_MOBILE,g.customAlertsConfig=JSON.parse(p.localStorage.getItem("custom_alerts_config"))||{},g.customAlertsEnabled=!!JSON.parse(p.localStorage.getItem("custom_alerts_enabled"))&&!angular.equals(g.customAlertsConfig,{})||!1,g.getCustomAlertText=function(){if(g.getAlertsEnabled()){var e,t=[];for(e in g.customAlertsConfig.coins)g.customAlertsConfig.coins[e].selected&&t.push(g.customAlertsConfig.coins[e].code);var a="";return 1<t.length?(a=t.slice(0,-1).join(", "),a+=" y "+t.slice(-1)[0]):a=t[0],"Tenés una alerta para "+a+" desde "+g.customAlertsConfig.profit.replace(".",",")+"% de ganancia."}return""},g.alertsEnabled=!!JSON.parse(p.localStorage.getItem("generic_alerts_enabled"))||g.customAlertsEnabled||!1,g.getAlertsEnabled=function(){return g.alertsEnabled},g.alertsPermissionGrantedInThePast="Notification"in window&&"granted"===Notification.permission,g.rollsLoadingStatus="indeterminate",g.maxDecimalsPerCoin={BTC:7,ETH:7,DAI:2,USDC:2,USDT:2};var u=[];u.ARS=new Set,u.USD=new Set;try{u.ARS=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_ars")))}catch{p.localStorage.setItem("blocked_providers_ars",JSON.stringify([]))}try{u.USD=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_usd")))}catch{p.localStorage.setItem("blocked_providers_usd",JSON.stringify([]))}g.appliedFiltersText=function(){return 0<u[g.currencySelected].size?" ("+u[g.currencySelected].size+")":""};var m=[];m.ARS=new Set,m.USD=new Set;try{m.ARS=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_ars")))}catch{p.localStorage.setItem("blocked_providers_ars",JSON.stringify([]))}try{m.USD=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_usd")))}catch{p.localStorage.setItem("blocked_providers_usd",JSON.stringify([]))}function w(){return Array.from(u[g.currencySelected]).sort()}g.notExistsInBlockedProvidersList=function(e){return!m[g.currencySelected].has(e)},g.addOrRemoveFromBlockedProviderList=function(e){g.notExistsInBlockedProvidersList(e)?m[g.currencySelected].add(e):m[g.currencySelected].delete(e)},g.getProviders=function(){return g.visibleFiltersDialog?i.get():[]},g.doFilterProviders=function(){(!Array.from(m[g.currencySelected]).every(u[g.currencySelected].has.bind(u[g.currencySelected]))||0<u[g.currencySelected].size&&0==m[g.currencySelected].size||u[g.currencySelected].size>m[g.currencySelected].size)&&(u[g.currencySelected]=new Set(m[g.currencySelected]),p.localStorage.setItem("blocked_providers_ars",JSON.stringify(Array.from(u.ARS))),p.localStorage.setItem("blocked_providers_usd",JSON.stringify(Array.from(u.USD))),g.updatePrices(void 0,!0)),n.hide()},g.changePriceDisabled=!1,g.whenChangeCurrency=function(e){s.push(e)},g.updatePrices=function(e,t){for(var a in S.clear(),b.clear(),t?p.gtag("event","providers_filtered",{event_category:"user_action",event_label:w().join()||"Unfiltered"}):(e&&(g.currencySelected=e),p.gtag("event","currency_change",{event_category:"user_action",event_label:g.currencySelected}),g.changePriceDisabled=!0,u[g.currencySelected]=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_"+g.currencySelected.toLowerCase()))),m[g.currencySelected]=new Set(JSON.parse(p.localStorage.getItem("blocked_providers_"+g.currencySelected.toLowerCase()))),i.clear()),h={},c={},s)s[a]();t?(d=!0,f(function(){d=!1},1e3)):f(function(){g.changePriceDisabled=!1},2500),p.localStorage.setItem("currency_selected",g.currencySelected)},g.loadCoin=function(n,o){return a.get(p.PRICES_ENDPOINT+"/prices/"+g.currencySelected+"/"+n+"/"+o+(0<w().length?"?not="+w().join():""),{headers:{"If-None-Match":c[n+o+g.currencySelected+w().join("")]}}).then(function(e){var t,a=[];for(t in c[n+o+g.currencySelected+w().join("")]=e.headers("Etag"),e.data)e.data[t].fields[g.currencySelected]&&(e.data[t].fields.price=e.data[t].fields[g.currencySelected],e.data[t].fields.price.currencyMask="ARS"==g.currencySelected?"$":"US$",a.push(e.data[t]),i.add(e.data[t].fields.name),u[g.currencySelected].forEach(i.add,i));return{results:a}})},g.loadRolls=function(){y();var e,t,a=o(y,6e4),n=!0;document.addEventListener("visibilitychange",function(){g.getAlertsEnabled()||(n=!0,o.cancel(a),f.cancel(e),document.hidden?n=!1:(a=o(y,6e4),e=f(y,5e3)))}),window.addEventListener("focus",function(){g.getAlertsEnabled()||(f.cancel(t),t=f(function(){n||(o.cancel(a),f.cancel(e),a=o(y,6e4),e=f(y,1),n=!0)},4999))})},g.compare_prices_ask={comparator:function(e,t){return e.price.ask-t.price.ask}},g.compare_prices_bid={comparator:function(e,t){return e.price.bid-t.price.bid}},g.btc_title="<i class='crypto-icon btc'></i> <h2>BITCOIN</h2>",g.eth_title="<i class='crypto-icon eth'></i> <h2>ETHEREUM</h2>",g.dai_title="<i class='crypto-icon dai'></i> <h2>DAI</h2>",g.usdc_title="<i class='crypto-icon usdc'></i> <h2>USDC</h2>",g.usdt_title="<i class='crypto-icon usdt'></i> <h2>USDT</h2>",g.specificRollData={};var v={body:"Hay una nueva oportunidad con $COIN.",icon:"/static/img/logo.png"},C=new Set;function y(){g.rollsLoadingStatus="indeterminate",a.get(p.PRICES_ENDPOINT+"/rolls/"+g.currencySelected+(0<w().length?"?not="+w().join():""),{headers:{"If-None-Match":h[g.currencySelected+w().join("")]}}).then(function(e){var t=[];h[g.currencySelected+w().join("")]=e.headers("Etag");var a="";for(o in Array.from(C))R(!1,Array.from(C)[o].toLowerCase());for(o in e.data)a!=e.data[o].k&&(a=e.data[o].k),e.data[o].buy.fields[g.currencySelected]&&e.data[o].sell.fields[g.currencySelected]?(e.data[o].buy.fields.price=e.data[o].buy.fields[g.currencySelected],e.data[o].sell.fields.price=e.data[o].sell.fields[g.currencySelected],e.data[o].buy.fields.currencyMask="ARS"==g.currencySelected?"$":"US$",e.data[o].sell.fields.currencyMask="ARS"==g.currencySelected?"$":"US$",t.push(e.data[o]),R(!0,a,e.data[o])):R(!1,a);if(g.rollsLoadingStatus="determinate",!window.IS_MOBILE){var n,o,r,i,l,s=new Set,c=new Set,d=new Set;for(o in C.forEach(d.add,d),t)if(d.delete(t[o].k.toUpperCase()),!g.customAlertsEnabled||g.customAlertsEnabled&&0<g.customAlertsConfig.coins.filter(function(e){return e.code==t[o].k.toUpperCase()&&e.selected}).length&&parseFloat(t[o].difference.replace(",","."))>=g.customAlertsConfig.profit){if(S.has(t[o].k.toUpperCase())&&b.has(t[o].k.toUpperCase()+"|"+t[o].buy.fields.name.toUpperCase()+"|"+t[o].sell.fields.name.toUpperCase()))b.has(t[o].k.toUpperCase()+"|"+t[o].buy.fields.name.toUpperCase()+"|"+t[o].sell.fields.name.toUpperCase())&&.5<=parseFloat(t[o].difference.replace(",","."))-b.get(t[o].k.toUpperCase()+"|"+t[o].buy.fields.name.toUpperCase()+"|"+t[o].sell.fields.name.toUpperCase())&&c.add(t[o].k.toUpperCase());else{S.add(t[o].k.toUpperCase()),s.add(t[o].k.toUpperCase());var u,m=Array.from(b.keys());for(u in m)m[u].substring(0,3)==t[o].k.toUpperCase()&&b.delete(m[u])}b.set(t[o].k.toUpperCase()+"|"+t[o].buy.fields.name.toUpperCase()+"|"+t[o].sell.fields.name.toUpperCase(),parseFloat(t[o].difference.replace(",",".")))}d.forEach(S.delete,S),document.hidden&&!window.IS_MOBILE&&"Notification"in window&&"granted"===Notification.permission&&g.alertsEnabled&&(0<s.size||0<c.size)&&(s.forEach(S.add,S),c.forEach(S.add,S),0<s.size&&(n="",o=1,l=JSON.parse(JSON.stringify(v)),s.forEach(function(e){2==o&&s.size==o?n+=" y "+e:2==o?n+=", "+e:1==o&&(n+=e),o++}),r=0,2==s.size?(r=1,l.body="Hay oportunidades con $COIN."):2<s.size&&(r=2,l.body="Hay oportunidades con $COIN y más."),l.body=l.body.replace("$COIN",n),new Notification(["📣","🎉","🥳"][r]+" Tenés una alerta",l).onclick=function(){window.focus(),p.gtag("event","notification",{event_category:"user_action",event_label:"click"})},i=[],b.forEach(function(e,t){i.push(t+"|"+e)}),p.gtag("event","notification_sended",{event_category:"system_action",event_label:i.toString(",")})),0<c.size&&((l=0)<s.size&&(l=1e4),f(function(){var t="",a=1,e=JSON.parse(JSON.stringify(v));c.forEach(function(e){2==a&&c.size==a?t+=" y "+e:2==a?t+=", "+e:1==a&&(t+=e),a++}),c.size<=2?e.body="Mejoró una oportunidad con $COIN.":2<c.size&&(e.body="Mejoró una oportunidad con $COIN y más."),e.body=e.body.replace("$COIN",t),new Notification(["💰","📈","🔥"][Math.floor(3*Math.random())]+" Aumentó el porcentaje de ganancia",e).onclick=function(){window.focus(),p.gtag("event","notification",{event_category:"user_action",event_label:"click"})}},l)))}},function(e){304!==e.status&&R(!1),g.rollsLoadingStatus="determinate"})}function R(e,t,a){if(t)g.specificRollData[t]&&delete g.specificRollData[t].manuallySetted,g.specificRollData[t]=g.specificRollData[t]||{},g.specificRollData[t].show=e,a&&(g.specificRollData[t].data=a,3.5<=parseFloat(g.specificRollData[t].data.difference.replace(",","."))&&3.5<=g.specificRollData[t].data.buy.fields.score.average_transfer_speed_rating&&3.5<=g.specificRollData[t].data.sell.fields.score.average_transfer_speed_rating&&(g.specificRollData[t].score=3,g.trackSystem("unique_opportunity","show")));else if(!e){var n,o=Object.keys(g.specificRollData);for(n in o)delete g.specificRollData[o[n]]}}C.add("BTC"),C.add("ETH"),C.add("DAI"),C.add("USDC"),C.add("USDT");var D=!(g.showFiltersDialog=function(e){d||(g.visibleFiltersDialog=!0,n.show({contentElement:"#filters-dialog",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,onRemoving:function(){g.visibleFiltersDialog=!1}}))}),P=!1;g.showRollCalculatorDialog=function(e,t){P=D=!1,g.showCalculatorWarning=!1,p.gtag("event","roll_calculator",{event_category:"user_action",event_label:"open_"+t+"_"+g.currencySelected}),g.selectedCoinForRoll=t,g.rollCalculator={amount:("BTC"!=t.toUpperCase()&&"ETH"!=t.toUpperCase()?1e3*g.specificRollData[g.selectedCoinForRoll].data.buy.fields[g.currencySelected].ask:g.specificRollData[g.selectedCoinForRoll].data.buy.fields[g.currencySelected].ask).toString().replace(".",",")},g.calculatorRollData=Object.assign({},g.specificRollData[t]);var a=g.$watch("specificRollData[selectedCoinForRoll]",function(e,t){e&&e.manuallySetted||e===t||(D||e&&(!e||e===t||e.data.buy.fields.name===t.data.buy.fields.name&&e.data.sell.fields.name===t.data.sell.fields.name)?D||P||e===t||e.data.buy.fields.name!==t.data.buy.fields.name||e.data.sell.fields.name!==t.data.sell.fields.name||e.data.buy.fields[g.currencySelected].ask===t.data.buy.fields[g.currencySelected].ask&&e.data.sell.fields[g.currencySelected].bid===t.data.sell.fields[g.currencySelected].bid||(P=!0,g.calculatorWarningText="Los precios que estás viendo están desactualizados.",g.calculatorWarningCTAText="ACTUALIZAR",g.calculatorWarningCTAAvailable=!0,g.showCalculatorWarning=!0):(D=!0,g.calculatorWarningText="Esta oportunidad ya no está disponible.",g.calculatorWarningCTAAvailable=!1,g.showCalculatorWarning=!0))},!0);n.show({contentElement:"#roll-calculator-dialog",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,onRemoving:function(){a()}})},g.updateValuesInRollCalculator=function(){g.calculatorWarningCTAAvailable&&(g.specificRollData[g.selectedCoinForRoll].manuallySetted=!0,g.calculatorRollData=Object.assign({},g.specificRollData[g.selectedCoinForRoll]),g.showCalculatorWarning=!1,P=!1)},e.showRollCalculatorDialog=g.showRollCalculatorDialog,g.showAlertsPermissionDialog=function(e,t){(g.alertsForcedFiltersStep=t)?g.customizeAlerts():(g.step1Alerts=!0,g.step2Alerts=!1,g.step3Alerts=!1),n.show({contentElement:"#alerts-permission-dialog",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0})},e.showAlertsPermissionDialog=g.showAlertsPermissionDialog;var A={body:"¡Hola! Así se verán las notificaciones 😉",icon:"/static/img/logo.png"},F={body:"Te mantendremos informado.",icon:"/static/img/logo.png"};if(g.customAlertsEnabled)g.availableOptionsForAlerts=JSON.parse(p.localStorage.getItem("custom_alerts_config"))||{};else for(var T in g.availableOptionsForAlerts={coins:[],profit:void 0},Array.from(C))g.availableOptionsForAlerts.coins.push({code:Array.from(C)[T],selected:!1});g.isCoinsIndeterminatedInAlertCustomization=function(){return 0<g.availableOptionsForAlerts.coins.filter(function(e){return e.selected}).length&&!g.allCoinsSelectedInAlertCustomization()},g.allCoinsSelectedInAlertCustomization=function(){return 0===g.availableOptionsForAlerts.coins.filter(function(e){return!e.selected}).length},g.anyCoinSelectedInCustomization=function(){return 0<g.availableOptionsForAlerts.coins.filter(function(e){return e.selected}).length},g.toggleAllCoinsInAlertCustomization=function(){g.allCoinsSelectedInAlertCustomization()?g.availableOptionsForAlerts.coins.forEach(function(e){e.selected=!1}):g.availableOptionsForAlerts.coins.filter(function(e){return!e.selected}).forEach(function(e){e.selected=!0})},g.customizeAlerts=function(){g.step1Alerts=!1,g.step2Alerts=!0,g.step3Alerts=!1},g.enableAlerts=function(){g.step1Alerts=!1,g.step2Alerts=!1,g.step3Alerts=!0,g.customAlertsConfig=g.availableOptionsForAlerts,p.localStorage.setItem("custom_alerts_config",angular.toJson(g.customAlertsConfig)),p.gtag("event","notifications_configured",{event_category:"user_action",event_label:g.customAlertsConfig.coins.filter(function(e){return e.selected}).map(function(e){return e.code}).toString(",")+"|"+g.customAlertsConfig.profit}),"Notification"in window&&"granted"===Notification.permission?(g.cancelModal(),p.localStorage.getItem("custom_alerts_enabled")?g.alertsForcedFiltersStep?l.sendSnackbarAlert("¡Listo! Guardamos los cambios."):new Notification("¡Te damos la bienvenida!",A):new Notification("🎉 Ya tenés alertas personalizadas",F),g.alertsEnabled=!0,g.customAlertsEnabled=!0,p.localStorage.removeItem("generic_alerts_enabled"),p.localStorage.setItem("custom_alerts_enabled",!0),p.gtag("event","notifications_change",{event_category:"user_action",event_label:"re_enabled_with_customization"})):"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission().then(function(e){"granted"===e?(g.cancelModal(),new Notification("¡Te damos la bienvenida!",A),g.alertsEnabled=!0,g.customAlertsEnabled=!0,p.localStorage.removeItem("generic_alerts_enabled"),p.localStorage.setItem("custom_alerts_enabled",!0),p.gtag("event","notifications_change",{event_category:"user_action",event_label:"enabled_with_customization"})):p.gtag("event","notifications_change",{event_category:"user_action",event_label:"rejected_with_customization"})})},g.disableAlerts=function(){g.cancelModal(),g.alertsEnabled=!1,g.customAlertsEnabled=!1,g.customAlertsConfig={},p.localStorage.setItem("generic_alerts_enabled",!1),p.localStorage.setItem("custom_alerts_enabled",!1),p.localStorage.removeItem("custom_alerts_config"),l.sendSnackbarAlert("Desactivaste las alertas.<br/>No volveremos a notificarte cuando haya nuevas oportunidades."),p.gtag("event","notifications_change",{event_category:"user_action",event_label:"disabled"})},e.disableAlerts=g.disableAlerts,g.cancelModal=function(){n.cancel()},!window.IS_MOBILE&&"Notification"in window&&"granted"===Notification.permission&&g.alertsEnabled||(g.alertsEnabled=!1,p.localStorage.setItem("generic_alerts_enabled",!1))}]).filter("makePositive",function(){return function(e){return Math.abs(e)}}).directive("sanitizeCalculatorInput",function(){return{require:"ngModel",link:function(e,t,a,n){e.$watch(a.ngModel,function(e){null!=e&&(n.$setViewValue(String(e).replace(/,/g,".").replace(/\$/g,"").substring(0,9)),t.val(String(e).replace(/,/g,".").replace(/\$/g,"").substring(0,9)))})}}}).directive("input",function(){return{restrict:"E",require:"ngModel",link:function(e,t,a,n){"number"===t[0].type&&(n.$parsers.push(function(e){return Number(e)}),n.$formatters.push(function(e){return parseFloat(e,10)}))}}});