angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","ngclipboard","angular.snackbar","star-rating","fayzaan.gRecaptcha.v3"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider","$locationProvider",function(e,n,i,t){n.debugInfoEnabled(!1),i.disableTheming(!0),e.decorator("$exceptionHandler",["$delegate",function(i){return function(e,n){i(e,n),reportError(JSON.stringify({exception:"object"==typeof e?e.stack:""+e,cause:""+n}))}}]),t.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/*"])}]);var e=angular.module("app");e.controller("ReviewsRankingController",["$scope","$window","$location","$http","$timeout","$mdDialog","gRecaptcha","commonFunctionsService",function(i,t,e,n,r,o,a,s){i.tooltipCopySuccessful=s.tooltipCopySuccessful,i.track=s.track,i.showCountriesMenu=s.showCountriesMenu,i.orderByOption={option:"br"==t.COUNTRY?"melhor-medio":"mejor-promedio"},a.initialize({key:"6Le6vr8ZAAAAAH6G2kvLs-VDT1cKIa_UGepnpMBI"});function l(e){c=e}var c=!(i.showDialogButtonDisabled=[]);i.showReviewSubmitDialog=function(e,n){i.showDialogButtonDisabled[e]||(i.showDialogButtonDisabled[e]=!0,o.show({controller:"ReviewSubmitDialogController",templateUrl:"/"+t.COUNTRY+"/partials/review-submit-dialog",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,locals:{extraParameters:{providerSelected:e,context:"ranking-page"},changeSubmittedState:l,gRecaptchaV3:a},onComplete:function(){i.showDialogButtonDisabled[e]=!1},onRemoving:function(e,n){c&&i.fetchRankingWhenChangeOrderByOption(i.orderByOption.option)}}))},i.fetchRankingWhenChangeOrderByOption=function(e){i.orderByOption.option=e,i.fetchRanking()},i.fetchRanking=function(){n.get(t.BARNEY_ENDPOINT+"/reviews/summarized-reviews-info/"+i.orderByOption.option).then(function(e){i.ranking=e.data},function(){})},r(function(){i.fetchRanking()},0),i.getRanking=function(){return i.ranking}}]),(e=angular.module("app")).controller("ReviewSubmitDialogController",["$scope","$window","$timeout","$http","$mdDialog","extraParameters","changeSubmittedState","gRecaptchaV3",function(i,n,t,r,e,o,a,s){i.step1=!0,i.step2=!1,i.context=o.context,i.providerSelected=o.providerSelected,i.answers={provider_id:o.providerSelected,review_comment:"",transfer_speed_rating:0,liquidity_rating:0,usability_rating:0,support_rating:0},i.submitReview=function(){var e=!1;i.answers.transfer_speed_rating<1&&i.answers.liquidity_rating<1&&(e||(angular.element(-1==i.answers.provider_id.indexOf("p2p")?document.querySelector("#transfer-speed-rating-div"):document.querySelector("#liquidity-rating-div"))[0].scrollIntoView(),e=!0),i.transfer_speed_rating_is_invalid=!0),i.answers.usability_rating<1&&(e||(angular.element(document.querySelector("#usability-rating-div"))[0].scrollIntoView(),e=!0),i.usability_rating_is_invalid=!0),i.answers.support_rating<1&&(e||(angular.element(document.querySelector("#support-rating-div"))[0].scrollIntoView(),e=!0),i.support_rating_is_invalid=!0),(i.answers.review_comment.length<20||1500<i.answers.review_comment.length)&&(e||(angular.element(document.querySelector("#review-comment-area-div"))[0].scrollIntoView(),e=!0),i.review_comment_area_is_invalid=!0,i.review_comment_area_was_invalid=!0),i.review_comment_area_is_invalid||i.transfer_speed_rating_is_invalid||i.usability_rating_is_invalid||i.support_rating_is_invalid?t(function(){i.review_comment_area_is_invalid=!1,i.transfer_speed_rating_is_invalid=!1,i.usability_rating_is_invalid=!1,i.support_rating_is_invalid=!1},1e3):i.submitting||(i.submitting=!0,s.execute({action:"submit_review"}).then(function(e){i.answers.captcha_response=e;e=n.BARNEY_ENDPOINT+"/"+n.COUNTRY+"/reviews/";"br"!=n.COUNTRY&&(e=n.BARNEY_ENDPOINT+"/reviews/"),r.put(e,i.answers),i.step1=!1,a(!0),i.step2=!0,i.submitting=!1}))},i.onRatingChange=function(e,n){i.answers[e]=n},i.getSelectedProvider=function(e){return angular.element(document.querySelectorAll('[value="'+e+'"]')).text().trim()},i.getSeeProviderReviewsUrl=function(e){return"/"+n.COUNTRY+"/opiniones/"+e+"/"},i.cancelModal=function(){e.cancel()}}]);