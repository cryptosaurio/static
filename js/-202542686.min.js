angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","ngclipboard","angular.snackbar","star-rating","fayzaan.gRecaptcha.v3"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider","$locationProvider",function(e,n,t,i){n.debugInfoEnabled(!1),t.disableTheming(!0),e.decorator("$exceptionHandler",["$delegate",function(t){return function(e,n){t(e,n),reportError(JSON.stringify({exception:"object"==typeof e?e.stack:""+e,cause:""+n}))}}]),i.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/*"])}]);var e=angular.module("app");e.controller("ReviewsRankingController",["$scope","$window","$location","$http","$timeout","$mdDialog","gRecaptcha","commonFunctionsService",function(t,i,e,n,r,o,a,s){t.tooltipCopySuccessful=s.tooltipCopySuccessful,t.track=s.track,t.showCountriesMenu=s.showCountriesMenu,t.orderByOption={option:"mejor-promedio"},a.initialize({key:"6Le6vr8ZAAAAAH6G2kvLs-VDT1cKIa_UGepnpMBI"});function l(e){c=e}var c=!(t.showDialogButtonDisabled=[]);t.showReviewSubmitDialog=function(e,n){t.showDialogButtonDisabled[e]||(t.showDialogButtonDisabled[e]=!0,o.show({controller:"ReviewSubmitDialogController",templateUrl:"/"+i.COUNTRY+"/partials/review-submit-dialog",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,locals:{extraParameters:{providerSelected:e,context:"ranking-page"},changeSubmittedState:l,gRecaptchaV3:a},onComplete:function(){t.showDialogButtonDisabled[e]=!1},onRemoving:function(e,n){c&&t.fetchRankingWhenChangeOrderByOption(t.orderByOption.option)}}))},t.fetchRankingWhenChangeOrderByOption=function(e){t.orderByOption.option=e,t.fetchRanking()},t.fetchRanking=function(){n.get(i.BARNEY_ENDPOINT+"/reviews/summarized-reviews-info/"+t.orderByOption.option).then(function(e){t.ranking=e.data},function(){})},r(function(){t.fetchRanking()},0),t.getRanking=function(){return t.ranking}}]),(e=angular.module("app")).controller("ReviewSubmitDialogController",["$scope","$window","$location","$timeout","$http","$mdDialog","extraParameters","changeSubmittedState","gRecaptchaV3",function(t,n,e,i,r,o,a,s,l){t.step1=!0,t.step2=!1,t.context=a.context,t.providerSelected=a.providerSelected,t.answers={provider_id:a.providerSelected,review_comment:"",transfer_speed_rating:0,usability_rating:0,support_rating:0},t.submitReview=function(){var e=!1;t.answers.transfer_speed_rating<1&&(e||(angular.element(document.querySelector("#transfer-speed-rating-div"))[0].scrollIntoView(),e=!0),t.transfer_speed_rating_is_invalid=!0),t.answers.usability_rating<1&&(e||(angular.element(document.querySelector("#usability-rating-div"))[0].scrollIntoView(),e=!0),t.usability_rating_is_invalid=!0),t.answers.support_rating<1&&(e||(angular.element(document.querySelector("#support-rating-div"))[0].scrollIntoView(),e=!0),t.support_rating_is_invalid=!0),(t.answers.review_comment.length<20||1500<t.answers.review_comment.length)&&(e||(angular.element(document.querySelector("#review-comment-area-div"))[0].scrollIntoView(),e=!0),t.review_comment_area_is_invalid=!0,t.review_comment_area_was_invalid=!0),t.review_comment_area_is_invalid||t.transfer_speed_rating_is_invalid||t.usability_rating_is_invalid||t.support_rating_is_invalid?i(function(){t.review_comment_area_is_invalid=!1,t.transfer_speed_rating_is_invalid=!1,t.usability_rating_is_invalid=!1,t.support_rating_is_invalid=!1},1e3):l.execute({action:"submit_review"}).then(function(e){t.answers.captcha_response=e,r.put(n.BARNEY_ENDPOINT+"/"+n.COUNTRY+"/reviews/",t.answers),t.step1=!1,s(!0),t.step2=!0})},t.onRatingChange=function(e,n){t.answers[e]=n},t.getSelectedProvider=function(e){return angular.element(document.querySelectorAll('[value="'+e+'"]')).text().trim()},t.getSeeProviderReviewsUrl=function(e){return"/"+n.COUNTRY+"/opiniones/"+e+"/"},t.cancelModal=function(){o.cancel()}}]);