var e=angular.module("app");e.controller("NavController",["$scope","$window","$http","$interval","$timeout","commonFunctionsService",function(n,e,i,c,a,o){n.isOutstandingInNavAlreadyClicked=o.isOutstandingInNavAlreadyClicked,n.hideOutstandingDotInNav=o.hideOutstandingDotInNav,n.coin_prices={},n.usd_prices={},loadcoinprices_etag=null,loadCoinPrices=function(){i.get(e.PRICES_ENDPOINT+"/prices/general_coin_prices",{headers:{"If-None-Match":loadcoinprices_etag}}).then(function(e){loadcoinprices_etag=e.headers("Etag"),updateCoinPrices(e.data)},function(e){})},loadusprices_etag=null,loadUsdPrices=function(){i.get(e.PRICES_ENDPOINT+"/prices/general_usd_prices",{headers:{"If-None-Match":loadusprices_etag}}).then(function(e){loadusprices_etag=e.headers("Etag"),updateUsdPrices(e.data)},function(e){})},updateCoinPrices=function(e){n.coin_prices=e},updateUsdPrices=function(e){n.usd_prices=e},loadCoinPrices(),loadUsdPrices();var d,s,t,r=c(loadCoinPrices,6e4),l=c(loadUsdPrices,6e4),u=!0;document.addEventListener("visibilitychange",function(){u=!0,c.cancel(r),c.cancel(l),a.cancel(d),a.cancel(s),document.hidden?u=!1:(d=a(loadCoinPrices,500),s=a(loadUsdPrices,500),r=c(loadCoinPrices,6e4),l=c(loadUsdPrices,6e4))}),window.addEventListener("focus",function(){a.cancel(t),t=a(function(){u||(c.cancel(r),c.cancel(l),a.cancel(d),a.cancel(s),d=a(loadCoinPrices,1),s=a(loadUsdPrices,1),r=c(loadCoinPrices,6e4),l=c(loadUsdPrices,6e4),u=!0)},499)})}]);