var e=angular.module("app");e.controller("NavController",["$scope","$rootScope","$window","$http","$interval","$timeout","commonFunctionsService",function(n,c,e,i,a,o,s){n.isOutstandingInNavAlreadyClicked=s.isOutstandingInNavAlreadyClicked,n.hideOutstandingDotInNav=s.hideOutstandingDotInNav,n.coin_prices={},n.usd_prices={},loadcoinprices_etag=null,loadCoinPrices=function(){i.get(e.PRICES_ENDPOINT+"/prices/general_coin_prices",{headers:{"If-None-Match":loadcoinprices_etag}}).then(function(e){loadcoinprices_etag=e.headers("Etag"),updateCoinPrices(e.data)},function(e){})},loadusprices_etag=null,loadUsdPrices=function(){i.get(e.PRICES_ENDPOINT+"/prices/general_usd_prices",{headers:{"If-None-Match":loadusprices_etag}}).then(function(e){loadusprices_etag=e.headers("Etag"),updateUsdPrices(e.data)},function(e){})},updateCoinPrices=function(e){n.coin_prices=e,c.coin_prices=e},updateUsdPrices=function(e){n.usd_prices=e},loadCoinPrices(),loadUsdPrices();var d,t,r,l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4),p=!0;document.addEventListener("visibilitychange",function(){p=!0,a.cancel(l),a.cancel(u),o.cancel(d),o.cancel(t),document.hidden?p=!1:(d=o(loadCoinPrices,500),t=o(loadUsdPrices,500),l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4))}),window.addEventListener("focus",function(){o.cancel(r),r=o(function(){p||(a.cancel(l),a.cancel(u),o.cancel(d),o.cancel(t),d=o(loadCoinPrices,1),t=o(loadUsdPrices,1),l=a(loadCoinPrices,6e4),u=a(loadUsdPrices,6e4),p=!0)},499)})}]);