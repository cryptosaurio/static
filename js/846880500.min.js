angular.module("app",["ngSanitize","ngMaterial","ngMessages","ngMdIcons","ngclipboard","angular.snackbar","star-rating","fayzaan.gRecaptcha.v3"]).config(["$provide","$compileProvider","$mdThemingProvider","$sceDelegateProvider","$mdAriaProvider",function(e,t,i,r,n){t.debugInfoEnabled(!1),i.disableTheming(!0),n.disableWarnings(),e.decorator("$exceptionHandler",["$delegate",function(i){return function(e,t){i(e,t),reportError(JSON.stringify({exception:"object"==typeof e?e.stack:""+e,cause:""+t}))}}]),r.resourceUrlWhitelist(["https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@**","**/partials/*"])}]);var e=angular.module("app");e.controller("ReviewsLandingController",["$scope","$window","$mdDialog","commonFunctionsService","gRecaptcha",function(r,t,n,e,a){r.tooltipCopySuccessful=e.tooltipCopySuccessful,r.track=e.track,r.trackSystem=e.trackSystem,r.showCountriesMenu=e.showCountriesMenu;function o(e){l=e}var l=!(r.redirectTo=function(e){t.open(e,"_blank")});a.initialize({key:"6Le6vr8ZAAAAAH6G2kvLs-VDT1cKIa_UGepnpMBI"}),r.reviewButtonDisabled=[],r.submitted=[],r.showReviewSubmitDialog=function(i,e){r.reviewButtonDisabled[i]||(r.reviewButtonDisabled[i]=!0,n.show({controller:"ReviewSubmitDialogController",templateUrl:"/"+t.COUNTRY+"/partials/review-submit-dialog",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,locals:{extraParameters:{providerSelected:i,context:"ranking-page"},changeSubmittedState:o,gRecaptchaV3:a},onComplete:function(){r.reviewButtonDisabled[i]=!1},onRemoving:function(e,t){l&&(r.submitted[i]=!0)}}))},r.scroll=function(e,t){var i=document.getElementById(t);scrollCompleted=0;var r=setInterval(function(){"left"==e?i.scrollLeft-=25:i.scrollLeft+=25,scrollCompleted+=25,100<=scrollCompleted&&window.clearInterval(r)},50)}}]),(e=angular.module("app")).controller("ReviewSubmitDialogController",["$scope","$window","$timeout","$http","$mdDialog","extraParameters","changeSubmittedState","gRecaptchaV3",function(i,t,r,n,e,a,o,l){i.step1=!0,i.step2=!1,i.context=a.context,i.providerSelected=a.providerSelected,i.answers={provider_id:a.providerSelected,review_comment:"",transfer_speed_rating:0,liquidity_rating:0,usability_rating:0,support_rating:0,arbitrage_quality:-2},i.submitReview=function(){var e=!1;i.answers.transfer_speed_rating<1&&i.answers.liquidity_rating<1&&(e||(angular.element(-1==i.answers.provider_id.indexOf("p2p")?document.querySelector("#transfer-speed-rating-div"):document.querySelector("#liquidity-rating-div"))[0].scrollIntoView(),e=!0),i.transfer_speed_rating_is_invalid=!0),i.answers.usability_rating<1&&(e||(angular.element(document.querySelector("#usability-rating-div"))[0].scrollIntoView(),e=!0),i.usability_rating_is_invalid=!0),i.answers.support_rating<1&&(e||(angular.element(document.querySelector("#support-rating-div"))[0].scrollIntoView(),e=!0),i.support_rating_is_invalid=!0),-2==i.answers.arbitrage_quality&&-1==i.answers.provider_id.indexOf("p2p")&&(e||(angular.element(document.querySelector("#arbitrage-quality-div"))[0].scrollIntoView(),e=!0),i.arbitrage_quality_is_invalid=!0),(i.answers.review_comment.length<20||1500<i.answers.review_comment.length)&&(e||(angular.element(document.querySelector("#review-comment-area-div"))[0].scrollIntoView(),e=!0),i.review_comment_area_is_invalid=!0,i.review_comment_area_was_invalid=!0),i.review_comment_area_is_invalid||i.transfer_speed_rating_is_invalid||i.usability_rating_is_invalid||i.support_rating_is_invalid||i.arbitrage_quality_is_invalid?r(function(){i.review_comment_area_is_invalid=!1,i.transfer_speed_rating_is_invalid=!1,i.usability_rating_is_invalid=!1,i.support_rating_is_invalid=!1,i.arbitrage_quality_is_invalid=!1},1e3):i.submitting||(i.submitting=!0,l.execute({action:"submit_review"}).then(function(e){i.answers.captcha_response=e;e=t.BARNEY_ENDPOINT+"/"+t.COUNTRY+"/reviews/";"br"!=t.COUNTRY&&(e=t.BARNEY_ENDPOINT+"/reviews/"),n.put(e,i.answers),i.step1=!1,o(!0),i.step2=!0,i.submitting=!1}))},i.onRatingChange=function(e,t){i.answers[e]=t},i.getSelectedProvider=function(e){return angular.element(document.querySelectorAll('[value="'+e+'"]')).text().trim()},i.getSeeProviderReviewsUrl=function(e){return"/"+t.COUNTRY+"/opiniones/"+e+"/"},i.cancelModal=function(){e.cancel()}}]);